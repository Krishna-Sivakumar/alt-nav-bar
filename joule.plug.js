var dt=Object.create;var oe=Object.defineProperty;var gt=Object.getOwnPropertyDescriptor;var mt=Object.getOwnPropertyNames;var ht=Object.getPrototypeOf,vt=Object.prototype.hasOwnProperty;var yt=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),ie=(t,n)=>{for(var e in n)oe(t,e,{get:n[e],enumerable:!0})},xt=(t,n,e,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of mt(n))!vt.call(t,p)&&p!==e&&oe(t,p,{get:()=>n[p],enumerable:!(u=gt(n,p))||u.enumerable});return t};var wt=(t,n,e)=>(e=t!=null?dt(ht(t)):{},xt(n||!t||!t.__esModule?oe(e,"default",{value:t,enumerable:!0}):e,t));var Ke=yt((kn,Fe)=>{"use strict";var D=class extends SyntaxError{constructor(n,e,u,p){super(n),this.expected=e,this.found=u,this.location=p,this.name="SyntaxError"}format(n){let e="Error: "+this.message;if(this.location){let u=null,p=n.find(S=>S.source===this.location.source);p&&(u=p.text.split(/\r\n|\n|\r/g));let w=this.location.start,b=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(w):w,A=this.location.source+":"+b.line+":"+b.column;if(u){let S=this.location.end,T="".padEnd(b.line.toString().length," "),M=u[w.line-1],y=(w.line===S.line?S.column:M.length+1)-w.column||1;e+=`
 --> `+A+`
`+T+` |
`+b.line+" | "+M+`
`+T+" | "+"".padEnd(w.column-1," ")+"".padEnd(y,"^")}else e+=`
 at `+A}return e}static buildMessage(n,e){function u(y){return y.codePointAt(0).toString(16).toUpperCase()}let p=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function w(y){return p?y.replace(p,h=>"\\u{"+u(h)+"}"):y}function b(y){return w(y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,h=>"\\x0"+u(h)).replace(/[\x10-\x1F\x7F-\x9F]/g,h=>"\\x"+u(h)))}function A(y){return w(y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,h=>"\\x0"+u(h)).replace(/[\x10-\x1F\x7F-\x9F]/g,h=>"\\x"+u(h)))}let S={literal(y){return'"'+b(y.text)+'"'},class(y){let h=y.parts.map(_=>Array.isArray(_)?A(_[0])+"-"+A(_[1]):A(_));return"["+(y.inverted?"^":"")+h.join("")+"]"+(y.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(y){return y.description}};function T(y){return S[y.type](y)}function M(y){let h=y.map(T);if(h.sort(),h.length>0){let _=1;for(let E=1;E<h.length;E++)h[E-1]!==h[E]&&(h[_]=h[E],_++);h.length=_}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function j(y){return y?'"'+b(y)+'"':"end of input"}return"Expected "+M(n)+" but "+j(e)+" found."}};function _t(t,n){n=n!==void 0?n:{};let e={},u=n.grammarSource,p={Meal:be},w=be,b=`
`,A="(",S=")",T="*",M="/",j="s",y=".",h=/^[A-z]/,_=/^[A-z0-9 '";,]/,E=/^[+\-]/,fe=/^[*\/]/,O=/^[0-9]/,pe=/^[ \t\n\r]/,Ie=k(`
`,!1),z=k("(",!1),Q=k(")",!1),de=K([["A","z"]],!1,!1,!1),ge=K([["A","z"],["0","9"]," ","'",'"',";",","],!1,!1,!1),L=K(["+","-"],!1,!1,!1),me=k("*",!1),he=k("/",!1),We=k("s",!1),ve=K(["*","/"],!1,!1,!1),V=K([["0","9"]],!1,!1,!1),Ge=k(".",!1),ye=K([" ","	",`
`,"\r"],!1,!1,!1);function He(r,s){return{name:r,items:s}}function ze(r,s,i,f){return{serving:r,unit:s||"",name:i,formula:f}}function Qe(){return J()}function dn(r){return r}function Je(){return J()}function Ye(r,s){let i=r;for(let f in s){let[d,l]=s[f];i={type:d,left:l,right:i}}return i}function Xe(r,s){let i=r;for(let f in s){let[d,l]=s[f];i={type:d,left:l,right:i}}return i}function Ze(r,s){let i=r;for(let f in s){let[d,l]=s[f];i={type:d,left:i,right:l}}return i}function gn(r){return r}function mn(r){return r}function et(){return{type:"variable"}}function tt(r,s){let i=r;for(let f in s){let[d,l]=s[f];d=="+"?i={}:d=="-"&&(i-=l)}return i}function rt(r,s){let i=r;for(let f in s){let[d,l]=s[f];d=="*"?i*=l:d=="/"&&(i/=l)}return i}function hn(r){return r}function vn(r){return r}function nt(){return parseFloat(J())}let o=n.peg$currPos|0,P=o,F=[{line:1,column:1}],C=o,N=n.peg$maxFailExpected||[],m=n.peg$silentFails|0,R;if(n.startRule){if(!(n.startRule in p))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');w=p[n.startRule]}function J(){return t.substring(P,o)}function yn(){return P}function xn(){return{source:u,start:P,end:o}}function wn(){return B(P,o)}function bn(r,s){throw s=s!==void 0?s:B(P,o),we([st(r)],t.substring(P,o),s)}function Pn(r,s){throw s=s!==void 0?s:B(P,o),lt(r,s)}function ot(r=o){let s=t.codePointAt(r);return s===void 0?"":String.fromCodePoint(s)}function k(r,s){return{type:"literal",text:r,ignoreCase:s}}function K(r,s,i,f){return{type:"class",parts:r,inverted:s,ignoreCase:i,unicode:f}}function _n(){return{type:"any"}}function it(){return{type:"end"}}function st(r){return{type:"other",description:r}}function xe(r){let s=F[r],i;if(s)return s;if(r>=F.length)i=F.length-1;else for(i=r;!F[--i];);for(s=F[i],s={line:s.line,column:s.column};i<r;)t.charCodeAt(i)===10?(s.line++,s.column=1):s.column++,i++;return F[r]=s,s}function B(r,s,i){let f=xe(r),d=xe(s),l={source:u,start:{offset:r,line:f.line,column:f.column},end:{offset:s,line:d.line,column:d.column}};return i&&u&&typeof u.offset=="function"&&(l.start=u.offset(l.start),l.end=u.offset(l.end)),l}function v(r){o<C||(o>C&&(C=o,N=[]),N.push(r))}function lt(r,s){return new D(r,null,null,s)}function we(r,s,i){return new D(D.buildMessage(r,s),r,s,i)}function be(){let r,s,i,f;return r=o,s=_e(),s!==e?(t.charCodeAt(o)===10?(i=b,o++):(i=e,m===0&&v(Ie)),i!==e?(f=at(),P=r,r=He(s,f)):(o=r,r=e)):(o=r,r=e),r}function at(){let r,s;for(r=[],s=Pe();s!==e;)r.push(s),s=Pe();return r}function Pe(){let r,s,i,f,d,l,c,g,ne,pt;return r=o,s=x(),i=Ae(),i!==e?(f=ut(),d=ct(),d!==e?(l=x(),t.charCodeAt(o)===40?(c=A,o++):(c=e,m===0&&v(z)),c!==e?(g=Ce(),g!==e?(t.charCodeAt(o)===41?(ne=S,o++):(ne=e,m===0&&v(Q)),ne!==e?(pt=x(),P=r,r=ze(i,f,d,g)):(o=r,r=e)):(o=r,r=e)):(o=r,r=e)):(o=r,r=e)):(o=r,r=e),r}function ut(){let r,s,i;for(r=o,s=[],i=t.charAt(o),h.test(i)?o++:(i=e,m===0&&v(de));i!==e;)s.push(i),i=t.charAt(o),h.test(i)?o++:(i=e,m===0&&v(de));return P=r,s=Qe(),r=s,r}function ct(){let r,s,i,f;return r=o,s=x(),i=_e(),i!==e?(f=x(),P=r,r=i):(o=r,r=e),r}function _e(){let r,s,i;if(r=o,s=[],i=t.charAt(o),_.test(i)?o++:(i=e,m===0&&v(ge)),i!==e)for(;i!==e;)s.push(i),i=t.charAt(o),_.test(i)?o++:(i=e,m===0&&v(ge));else s=e;return s!==e&&(P=r,s=Je()),r=s,r}function Ce(){let r,s,i,f,d,l,c,g;if(r=o,s=x(),i=Y(),i!==e){for(f=x(),d=[],l=o,c=t.charAt(o),E.test(c)?o++:(c=e,m===0&&v(L)),c!==e?(g=Y(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l!==e;)d.push(l),l=o,c=t.charAt(o),E.test(c)?o++:(c=e,m===0&&v(L)),c!==e?(g=Y(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l=x(),P=r,r=Ye(i,d)}else o=r,r=e;return r}function Y(){let r,s,i,f,d,l,c,g;if(r=o,s=x(),i=X(),i!==e){for(f=x(),d=[],l=o,t.charCodeAt(o)===42?(c=T,o++):(c=e,m===0&&v(me)),c!==e?(g=X(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l!==e;)d.push(l),l=o,t.charCodeAt(o)===42?(c=T,o++):(c=e,m===0&&v(me)),c!==e?(g=X(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l=x(),P=r,r=Xe(i,d)}else o=r,r=e;return r}function X(){let r,s,i,f,d,l,c,g;if(r=o,s=x(),i=Z(),i!==e){for(f=x(),d=[],l=o,t.charCodeAt(o)===47?(c=M,o++):(c=e,m===0&&v(he)),c!==e?(g=Z(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l!==e;)d.push(l),l=o,t.charCodeAt(o)===47?(c=M,o++):(c=e,m===0&&v(he)),c!==e?(g=Z(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l=x(),P=r,r=Ze(i,d)}else o=r,r=e;return r}function Z(){let r,s,i,f;return r=o,s=x(),i=Se(),i!==e?(f=x(),P=r,r=i):(o=r,r=e),r===e&&(r=o,t.charCodeAt(o)===40?(s=A,o++):(s=e,m===0&&v(z)),s!==e?(i=Ce(),i!==e?(t.charCodeAt(o)===41?(f=S,o++):(f=e,m===0&&v(Q)),f!==e?(P=r,r=i):(o=r,r=e)):(o=r,r=e)):(o=r,r=e),r===e&&(r=ft())),r}function ft(){let r,s,i,f;return r=o,s=x(),t.charCodeAt(o)===115?(i=j,o++):(i=e,m===0&&v(We)),i!==e?(f=x(),P=r,r=et()):(o=r,r=e),r}function Ae(){let r,s,i,f,d,l,c,g;if(r=o,s=x(),i=ee(),i!==e){for(f=x(),d=[],l=o,c=t.charAt(o),E.test(c)?o++:(c=e,m===0&&v(L)),c!==e?(g=ee(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l!==e;)d.push(l),l=o,c=t.charAt(o),E.test(c)?o++:(c=e,m===0&&v(L)),c!==e?(g=ee(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l=x(),P=r,r=tt(i,d)}else o=r,r=e;return r}function ee(){let r,s,i,f,d,l,c,g;if(r=o,s=x(),i=te(),i!==e){for(f=x(),d=[],l=o,c=t.charAt(o),fe.test(c)?o++:(c=e,m===0&&v(ve)),c!==e?(g=te(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l!==e;)d.push(l),l=o,c=t.charAt(o),fe.test(c)?o++:(c=e,m===0&&v(ve)),c!==e?(g=te(),g!==e?(c=[c,g],l=c):(o=l,l=e)):(o=l,l=e);l=x(),P=r,r=rt(i,d)}else o=r,r=e;return r}function te(){let r,s,i,f;return r=o,s=x(),i=Se(),i!==e?(f=x(),P=r,r=i):(o=r,r=e),r===e&&(r=o,t.charCodeAt(o)===40?(s=A,o++):(s=e,m===0&&v(z)),s!==e?(i=Ae(),i!==e?(t.charCodeAt(o)===41?(f=S,o++):(f=e,m===0&&v(Q)),f!==e?(P=r,r=i):(o=r,r=e)):(o=r,r=e)):(o=r,r=e)),r}function Se(){let r,s,i,f,d,l;if(r=o,s=[],i=t.charAt(o),O.test(i)?o++:(i=e,m===0&&v(V)),i!==e)for(;i!==e;)s.push(i),i=t.charAt(o),O.test(i)?o++:(i=e,m===0&&v(V));else s=e;if(s!==e){if(i=o,t.charCodeAt(o)===46?(f=y,o++):(f=e,m===0&&v(Ge)),f!==e){if(d=[],l=t.charAt(o),O.test(l)?o++:(l=e,m===0&&v(V)),l!==e)for(;l!==e;)d.push(l),l=t.charAt(o),O.test(l)?o++:(l=e,m===0&&v(V));else d=e;d!==e?(f=[f,d],i=f):(o=i,i=e)}else o=i,i=e;i===e&&(i=null),P=r,r=nt()}else o=r,r=e;return r}function x(){let r,s;for(m++,r=[],s=t.charAt(o),pe.test(s)?o++:(s=e,m===0&&v(ye));s!==e;)r.push(s),s=t.charAt(o),pe.test(s)?o++:(s=e,m===0&&v(ye));return m--,r}R=w();let re=R!==e&&o===t.length;function Ee(){throw R!==e&&o<t.length&&v(it()),we(N,C<t.length?ot(C):null,C<t.length?B(C,C+1):B(C,C))}if(n.peg$library)return{peg$result:R,peg$currPos:o,peg$FAILED:e,peg$maxFailExpected:N,peg$maxFailPos:C,peg$success:re,peg$throw:re?void 0:Ee};if(re)return R;Ee()}Fe.exports={StartRules:["Meal"],SyntaxError:D,parse:_t}});function $e(t){let n=atob(t),e=n.length,u=new Uint8Array(e);for(let p=0;p<e;p++)u[p]=n.charCodeAt(p);return u}function se(t){typeof t=="string"&&(t=new TextEncoder().encode(t));let n="",e=t.byteLength;for(let u=0;u<e;u++)n+=String.fromCharCode(t[u]);return btoa(n)}var An=new Uint8Array(16);var le=class{constructor(n="",e=1e3){this.prefix=n;this.maxCaptureSize=e;this.prefix=n,this.originalConsole={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),debug:console.debug.bind(console)},this.patchConsole()}originalConsole;logBuffer=[];patchConsole(){let n=e=>(...u)=>{let p=this.prefix?[this.prefix,...u]:u;this.originalConsole[e](...p),this.captureLog(e,u)};console.log=n("log"),console.info=n("info"),console.warn=n("warn"),console.error=n("error"),console.debug=n("debug")}captureLog(n,e){let u={level:n,timestamp:Date.now(),message:e.map(p=>{if(typeof p=="string")return p;try{return JSON.stringify(p)}catch{return String(p)}}).join(" ")};this.logBuffer.push(u),this.logBuffer.length>this.maxCaptureSize&&this.logBuffer.shift()}async postToServer(n,e){if(this.logBuffer.length>0){let p=[...this.logBuffer];this.logBuffer=[];try{if(!(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p.map(b=>({...b,source:e})))})).ok)throw new Error("Failed to post logs to server")}catch(w){console.warn("Could not post logs to server",w.message),this.logBuffer.unshift(...p)}}}},Te;function Me(t=""){return Te=new le(t),Te}var q=t=>{throw new Error("Not initialized yet")},ce=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var ue=new Map,ae=0;ce&&(globalThis.syscall=async(t,...n)=>await new Promise((e,u)=>{ae++,ue.set(ae,{resolve:e,reject:u}),q({type:"sys",id:ae,name:t,args:n})}));function ke(t,n,e){ce&&(q=e,self.addEventListener("message",u=>{(async()=>{let p=u.data;switch(p.type){case"inv":{let w=t[p.name];if(!w)throw new Error(`Function not loaded: ${p.name}`);try{let b=await Promise.resolve(w(...p.args||[]));q({type:"invr",id:p.id,result:b})}catch(b){console.error("An exception was thrown as a result of invoking function",p.name,"error:",b.message),q({type:"invr",id:p.id,error:b.message})}}break;case"sysr":{let w=p.id,b=ue.get(w);if(!b)throw Error("Invalid request id");ue.delete(w),p.error?b.reject(new Error(p.error)):b.resolve(p.result)}break}})().catch(console.error)}),q({type:"manifest",manifest:n}),Me(`[${n.name} plug]`))}async function bt(t,n){if(typeof t!="string"){let e=new Uint8Array(await t.arrayBuffer()),u=e.length>0?se(e):void 0;n={method:t.method,headers:Object.fromEntries(t.headers.entries()),base64Body:u},t=t.url}return syscall("sandboxFetch.fetch",t,n)}globalThis.nativeFetch=globalThis.fetch;function Pt(){globalThis.fetch=async function(t,n){let e=n&&n.body?se(new Uint8Array(await new Response(n.body).arrayBuffer())):void 0,u=await bt(t,n&&{method:n.method,headers:n.headers,base64Body:e});return new Response(u.base64Body?$e(u.base64Body):null,{status:u.status,headers:u.headers})}}ce&&Pt();var U=wt(Ke());var De=`<style>table.svelte-1n46o8q{color:#fff;width:100%;border-collapse:collapse;margin:1em 0 0}tr.svelte-1n46o8q:nth-child(odd){background:#000}tbody.svelte-1n46o8q>tr:where(.svelte-1n46o8q):nth-child(2n){background:#000}tbody.svelte-1n46o8q>tr:where(.svelte-1n46o8q):nth-child(odd){background:gray}tbody.svelte-1n46o8q>tr:where(.svelte-1n46o8q):last-child{background:#000;font-weight:700}td.svelte-1n46o8q{padding:.6rem}button.svelte-1n46o8q{padding:.25em 1em;background:#000c;border:1px solid gray;border-radius:4px;font-weight:700;color:#fff;font-size:medium}</style>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calorie-table</title>
    <script type="module" crossorigin src="/calorie-table.js"><\/script>
    <link rel="stylesheet" crossorigin href="/calorie-table.css">
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
`;var Ue=`(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const et=!1;var Et=Array.isArray,on=Array.prototype.indexOf,st=Array.from,cn=Object.defineProperty,ke=Object.getOwnPropertyDescriptor,vn=Object.prototype,_n=Array.prototype,dn=Object.getPrototypeOf,dt=Object.isExtensible;function hn(e){for(var t=0;t<e.length;t++)e[t]()}function xt(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const x=2,Tt=4,lt=8,pn=1<<24,ee=16,oe=32,pe=64,Ye=128,H=512,k=1024,O=2048,te=4096,q=8192,le=16384,At=32768,Ne=65536,ht=1<<17,kt=1<<18,xe=1<<19,gn=1<<20,_e=32768,tt=1<<21,ft=1<<22,fe=1<<23,Ge=Symbol("$state"),me=new class extends Error{name="StaleReactionError";message="The reaction that called \`getAbortSignal()\` was re-run or destroyed"};function mn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function wn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function En(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function xn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const St=1,Ct=2,Nt=4,Tn=8,An=16,kn=1,Sn=2,A=Symbol();function Cn(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ft(e){return e===this.v}function Nn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Rt(e){return!Nn(e,this.v)}let Fn=!1,Y=null;function ye(e){Y=e}function Ot(e,t=!1,n){Y={p:Y,i:!1,c:null,e:null,s:e,x:null,l:null}}function It(e){var t=Y,n=t.e;if(n!==null){t.e=null;for(var r of n)er(r)}return t.i=!0,Y=t.p,{}}function Mt(){return!0}let we=[];function Rn(){var e=we;we=[],hn(e)}function Ke(e){if(we.length===0){var t=we;queueMicrotask(()=>{t===we&&Rn()})}we.push(e)}function qt(e){var t=m;if(t===null)return h.f|=fe,e;if((t.f&At)===0){if((t.f&Ye)===0)throw e;t.b.error(e)}else be(e,t)}function be(e,t){for(;t!==null;){if((t.f&Ye)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const De=new Set;let y=null,L=null,z=[],ut=null,nt=!1;class \${committed=!1;current=new Map;previous=new Map;#n=new Set;#r=new Set;#c=0;#s=0;#u=null;#l=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#s>0}process(t){z=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#e(r,n);this.is_fork||this.#a(),this.is_deferred()?(this.#t(n.effects),this.#t(n.render_effects),this.#t(n.block_effects)):(y=null,pt(n.render_effects),pt(n.effects),this.#u?.resolve()),L=null}#e(t,n){t.f^=k;for(var r=t.first;r!==null;){var s=r.f,i=(s&(oe|pe))!==0,u=i&&(s&k)!==0,a=u||(s&q)!==0||this.skipped_effects.has(r);if((r.f&Ye)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){i?r.f^=k:(s&Tt)!==0?n.effects.push(r):Pe(r)&&((r.f&ee)!==0&&n.block_effects.push(r),Ie(r));var l=r.first;if(l!==null){r=l;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(this.#t(n.effects),this.#t(n.render_effects),this.#t(n.block_effects),n=n.parent),r=f.next,f=f.parent}}#t(t){for(const n of t)((n.f&O)!==0?this.#l:this.#i).push(n),this.#f(n.deps),S(n,k)}#f(t){if(t!==null)for(const n of t)(n.f&x)===0||(n.f&_e)===0||(n.f^=_e,this.#f(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&fe)===0&&(this.current.set(t,t.v),L?.set(t,t.v))}activate(){y=this,this.apply()}deactivate(){y===this&&(y=null,L=null)}flush(){if(this.activate(),z.length>0){if(On(),y!==null&&y!==this)return}else this.#c===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#r)t(this);this.#r.clear()}#a(){if(this.#s===0){for(const t of this.#n)t();this.#n.clear()}this.#c===0&&this.#o()}#o(){if(De.size>1){this.previous.clear();var t=L,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of De){if(i===this){n=!1;continue}const u=[];for(const[l,f]of this.current){if(i.current.has(l))if(n&&f!==i.current.get(l))i.current.set(l,f);else continue;u.push(l)}if(u.length===0)continue;const a=[...i.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){var s=z;z=[];const l=new Set,f=new Map;for(const o of u)Pt(o,a,l,f);if(z.length>0){y=i,i.apply();for(const o of z)i.#e(o,r);i.deactivate()}z=s}}y=null,L=t}this.committed=!0,De.delete(this)}increment(t){this.#c+=1,t&&(this.#s+=1)}decrement(t){this.#c-=1,t&&(this.#s-=1),this.revive()}revive(){for(const t of this.#l)S(t,O),de(t);for(const t of this.#i)S(t,te),de(t);this.#l=[],this.#i=[],this.flush()}oncommit(t){this.#n.add(t)}ondiscard(t){this.#r.add(t)}settled(){return(this.#u??=xt()).promise}static ensure(){if(y===null){const t=y=new $;De.add(y),$.enqueue(()=>{y===t&&t.flush()})}return y}static enqueue(t){Ke(t)}apply(){}}function On(){var e=ae;nt=!0;var t=null;try{var n=0;for(Ue(!0);z.length>0;){var r=$.ensure();if(n++>1e3){var s,i;In()}r.process(z),ue.clear()}}finally{nt=!1,Ue(e),ut=null}}function In(){try{wn()}catch(e){be(e,ut)}}let J=null;function pt(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(le|q))===0&&Pe(r)&&(J=new Set,Ie(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Wt(r):r.fn=null),J?.size>0)){ue.clear();for(const s of J){if((s.f&(le|q))!==0)continue;const i=[s];let u=s.parent;for(;u!==null;)J.has(u)&&(J.delete(u),i.push(u)),u=u.parent;for(let a=i.length-1;a>=0;a--){const l=i[a];(l.f&(le|q))===0&&Ie(l)}}J.clear()}}J=null}}function Pt(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&x)!==0?Pt(s,t,n,r):(i&(ft|ee))!==0&&(i&O)===0&&Dt(s,t,r)&&(S(s,O),de(s))}}function Dt(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&x)!==0&&Dt(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function de(e){for(var t=ut=e;t.parent!==null;){t=t.parent;var n=t.f;if(nt&&t===m&&(n&ee)!==0&&(n&kt)===0)return;if((n&(pe|oe))!==0){if((n&k)===0)return;t.f^=k}}z.push(t)}function Mn(e){let t=0,n=he(0),r;return()=>{Re()&&(b(n),rr(()=>(t===0&&(r=ar(()=>e(()=>Se(n)))),t+=1,()=>{Ke(()=>{t-=1,t===0&&(r?.(),r=void 0,Se(n))})})))}}var qn=Ne|xe|Ye;function Pn(e,t,n){new Dn(e,t,n)}class Dn{parent;#n=!1;#r;#c=null;#s;#u;#l;#i=null;#e=null;#t=null;#f=null;#a=null;#o=0;#v=0;#d=!1;#_=null;#w=Mn(()=>(this.#_=he(this.#o),()=>{this.#_=null}));constructor(t,n,r){this.#r=t,this.#s=n,this.#u=r,this.parent=m.b,this.#n=!!this.#s.pending,this.#l=zt(()=>{m.b=this;{var s=this.#g();try{this.#i=G(()=>r(s))}catch(i){this.error(i)}this.#v>0?this.#p():this.#n=!1}return()=>{this.#a?.remove()}},qn)}#y(){try{this.#i=G(()=>this.#u(this.#r))}catch(t){this.error(t)}this.#n=!1}#b(){const t=this.#s.pending;t&&(this.#e=G(()=>t(this.#r)),$.enqueue(()=>{var n=this.#g();this.#i=this.#h(()=>($.ensure(),G(()=>this.#u(n)))),this.#v>0?this.#p():(Ce(this.#e,()=>{this.#e=null}),this.#n=!1)}))}#g(){var t=this.#r;return this.#n&&(this.#a=Fe(),this.#r.before(this.#a),t=this.#a),t}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#s.pending}#h(t){var n=m,r=h,s=Y;X(this.#l),R(this.#l),ye(this.#l.ctx);try{return t()}catch(i){return qt(i),null}finally{X(n),R(r),ye(s)}}#p(){const t=this.#s.pending;this.#i!==null&&(this.#f=document.createDocumentFragment(),this.#f.append(this.#a),lr(this.#i,this.#f)),this.#e===null&&(this.#e=G(()=>t(this.#r)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#n=!1,this.#e&&Ce(this.#e,()=>{this.#e=null}),this.#f&&(this.#r.before(this.#f),this.#f=null))}update_pending_count(t){this.#m(t),this.#o+=t,this.#_&&Ee(this.#_,this.#o)}get_effect_pending(){return this.#w(),b(this.#_)}error(t){var n=this.#s.onerror;let r=this.#s.failed;if(this.#d||!n&&!r)throw t;this.#i&&(U(this.#i),this.#i=null),this.#e&&(U(this.#e),this.#e=null),this.#t&&(U(this.#t),this.#t=null);var s=!1,i=!1;const u=()=>{if(s){Cn();return}s=!0,i&&xn(),$.ensure(),this.#o=0,this.#t!==null&&Ce(this.#t,()=>{this.#t=null}),this.#n=this.has_pending_snippet(),this.#i=this.#h(()=>(this.#d=!1,G(()=>this.#u(this.#r)))),this.#v>0?this.#p():this.#n=!1};var a=h;try{R(null),i=!0,n?.(t,u),i=!1}catch(l){be(l,this.#l&&this.#l.parent)}finally{R(a)}r&&Ke(()=>{this.#t=this.#h(()=>{$.ensure(),this.#d=!0;try{return G(()=>{r(this.#r,()=>t,()=>u)})}catch(l){return be(l,this.#l.parent),null}finally{this.#d=!1}})})}}function $e(e,t){return t}function Ln(e,t,n){for(var r=[],s=t.length,i=0;i<s;i++)ct(t[i].e,r,!0);Xt(r,()=>{var u=r.length===0&&n!==null;if(u){var a=n,l=a.parentNode;Xn(l),l.append(a),e.items.clear(),B(e,t[0].prev,t[s-1].next)}for(var f=0;f<s;f++){var o=t[f];u||(e.items.delete(o.k),B(e,o.prev,o.next)),U(o.e,!u)}e.first===t[0]&&(e.first=t[0].prev)})}function We(e,t,n,r,s,i=null){var u=e,a=new Map,l=null,f=(t&Nt)!==0,o=(t&St)!==0,_=(t&Ct)!==0;if(f){var v=e;u=v.appendChild(Fe())}var c=null,p=Yn(()=>{var E=n();return Et(E)?E:E==null?[]:st(E)}),w,d=!0;function g(){jn(ne,w,u,t,r),c!==null&&(w.length===0?(c.fragment?(u.before(c.fragment),c.fragment=null):Zt(c.effect),j.first=c.effect):Ce(c.effect,()=>{c=null}))}var j=zt(()=>{w=b(p);for(var E=w.length,C=new Set,T=y,I=null,P=Zn(),F=0;F<E;F+=1){var re=w[F],K=r(re,F),V=d?null:a.get(K);V?(o&&Ee(V.v,re),_?Ee(V.i,F):V.i=F,P&&T.skipped_effects.delete(V.e)):(V=Vn(d?u:null,I,re,K,F,s,t,n),d&&(V.o=!0,I===null?l=V:I.next=V,I=V),a.set(K,V)),C.add(K)}if(E===0&&i&&!c)if(d)c={fragment:null,effect:G(()=>i(u))};else{var vt=document.createDocumentFragment(),_t=Fe();vt.append(_t),c={fragment:vt,effect:G(()=>i(_t))}}if(!d)if(P){for(const[un,an]of a)C.has(un)||T.skipped_effects.add(an.e);T.oncommit(g),T.ondiscard(()=>{})}else g();b(p)}),ne={effect:j,items:a,first:l};d=!1}function jn(e,t,n,r,s){var i=(r&Tn)!==0,u=t.length,a=e.items,l=e.first,f,o=null,_,v=[],c=[],p,w,d,g;if(i)for(g=0;g<u;g+=1)p=t[g],w=s(p,g),d=a.get(w),d.o&&(d.a?.measure(),(_??=new Set).add(d));for(g=0;g<u;g+=1){if(p=t[g],w=s(p,g),d=a.get(w),e.first??=d,!d.o){d.o=!0;var j=o?o.next:l;B(e,o,d),B(e,d,j),Xe(d,j,n),o=d,v=[],c=[],l=o.next;continue}if((d.e.f&q)!==0&&(Zt(d.e),i&&(d.a?.unfix(),(_??=new Set).delete(d))),d!==l){if(f!==void 0&&f.has(d)){if(v.length<c.length){var ne=c[0],E;o=ne.prev;var C=v[0],T=v[v.length-1];for(E=0;E<v.length;E+=1)Xe(v[E],ne,n);for(E=0;E<c.length;E+=1)f.delete(c[E]);B(e,C.prev,T.next),B(e,o,C),B(e,T,ne),l=ne,o=T,g-=1,v=[],c=[]}else f.delete(d),Xe(d,l,n),B(e,d.prev,d.next),B(e,d,o===null?e.first:o.next),B(e,o,d),o=d;continue}for(v=[],c=[];l!==null&&l.k!==w;)(l.e.f&q)===0&&(f??=new Set).add(l),c.push(l),l=l.next;if(l===null)continue;d=l}v.push(d),o=d,l=d.next}let I=a.size>u;if(l!==null||f!==void 0){for(var P=f===void 0?[]:st(f);l!==null;)(l.e.f&q)===0&&P.push(l),l=l.next;var F=P.length;if(I=a.size-F>u,F>0){var re=(r&Nt)!==0&&u===0?n:null;if(i){for(g=0;g<F;g+=1)P[g].a?.measure();for(g=0;g<F;g+=1)P[g].a?.fix()}Ln(e,P,re)}}if(I)for(const K of a.values())K.o||(B(e,o,K),o=K);e.effect.last=o&&o.e,i&&Ke(()=>{if(_!==void 0)for(d of _)d.a?.apply()})}function Vn(e,t,n,r,s,i,u,a){var l=(u&St)!==0,f=(u&An)===0,o=l?f?zn(n,!1,!1):he(n):n,_=(u&Ct)===0?s:he(s),v={i:_,v:o,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var c=document.createDocumentFragment();c.append(e=Fe())}return v.e=G(()=>i(e,o,_,a)),t!==null&&(t.next=v),v}finally{}}function Xe(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var u=Me(i);s.before(i),i=u}}function B(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Bn(e,t,n,r){const s=at;if(n.length===0&&e.length===0){r(t.map(s));return}var i=y,u=m,a=Un();function l(){Promise.all(n.map(f=>Hn(f))).then(f=>{a();try{r([...t.map(s),...f])}catch(o){(u.f&le)===0&&be(o,u)}i?.deactivate(),Ve()}).catch(f=>{be(f,u)})}e.length>0?Promise.all(e).then(()=>{a();try{return l()}finally{i?.deactivate(),Ve()}}):l()}function Un(){var e=m,t=h,n=Y,r=y;return function(i=!0){X(e),R(t),ye(n),i&&r?.activate()}}function Ve(){X(null),R(null),ye(null)}function at(e){var t=x|O,n=h!==null&&(h.f&x)!==0?h:null;return m!==null&&(m.f|=xe),{ctx:Y,deps:null,effects:null,equals:Ft,f:t,fn:e,reactions:null,rv:0,v:A,wv:0,parent:n??m,ac:null}}function Hn(e,t){let n=m;n===null&&mn();var r=n.b,s=void 0,i=he(A),u=!h,a=new Map;return nr(()=>{var l=xt();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{f===y&&f.committed&&f.deactivate(),Ve()})}catch(v){l.reject(v),Ve()}var f=y;if(u){var o=!r.is_pending();r.update_pending_count(1),f.increment(o),a.get(f)?.reject(me),a.delete(f),a.set(f,l)}const _=(v,c=void 0)=>{if(f.activate(),c)c!==me&&(i.f|=fe,Ee(i,c));else{(i.f&fe)!==0&&(i.f^=fe),Ee(i,v);for(const[p,w]of a){if(a.delete(p),p===f)break;w.reject(me)}}u&&(r.update_pending_count(-1),f.decrement(o))};l.promise.then(_,v=>_(null,v||"unknown"))}),Qn(()=>{for(const l of a.values())l.reject(me)}),new Promise(l=>{function f(o){function _(){o===s?l(i):f(s)}o.then(_,_)}f(s)})}function Ze(e){const t=at(e);return Qt(t),t}function Yn(e){const t=at(e);return t.equals=Rt,t}function Lt(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)U(t[n])}}function Kn(e){for(var t=e.parent;t!==null;){if((t.f&x)===0)return(t.f&le)===0?t:null;t=t.parent}return null}function ot(e){var t,n=m;X(Kn(e));try{e.f&=~_e,Lt(e),t=rn(e)}finally{X(n)}return t}function jt(e){var t=ot(e);if(e.equals(t)||(y?.is_fork||(e.v=t),e.wv=tn()),!qe)if(L!==null)(Re()||y?.is_fork)&&L.set(e,t);else{var n=(e.f&H)===0?te:k;S(e,n)}}let rt=new Set;const ue=new Map;let Vt=!1;function he(e,t){var n={f:0,v:e,reactions:null,equals:Ft,rv:0,wv:0};return n}function Z(e,t){const n=he(e);return Qt(n),n}function zn(e,t=!1,n=!0){const r=he(e);return t||(r.equals=Rt),r}function se(e,t,n=!1){h!==null&&(!W||(h.f&ht)!==0)&&Mt()&&(h.f&(x|ee|ft|ht))!==0&&!Q?.includes(e)&&En();let r=n?Ae(t):t;return Ee(e,r)}function Ee(e,t){if(!e.equals(t)){var n=e.v;qe?ue.set(e,t):ue.set(e,n),e.v=t;var r=$.ensure();r.capture(e,n),(e.f&x)!==0&&((e.f&O)!==0&&ot(e),S(e,(e.f&H)!==0?k:te)),e.wv=tn(),Bt(e,O),m!==null&&(m.f&k)!==0&&(m.f&(oe|pe))===0&&(D===null?fr([e]):D.push(e)),!r.is_fork&&rt.size>0&&!Vt&&Gn()}return t}function Gn(){Vt=!1;var e=ae;Ue(!0);const t=Array.from(rt);try{for(const n of t)(n.f&k)!==0&&S(n,te),Pe(n)&&Ie(n)}finally{Ue(e)}rt.clear()}function Se(e){se(e,e.v+1)}function Bt(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],u=i.f,a=(u&O)===0;if(a&&S(i,t),(u&x)!==0){var l=i;L?.delete(l),(u&_e)===0&&(u&H&&(i.f|=_e),Bt(l,te))}else a&&((u&ee)!==0&&J!==null&&J.add(i),de(i))}}function Ae(e){if(typeof e!="object"||e===null||Ge in e)return e;const t=dn(e);if(t!==vn&&t!==_n)return e;var n=new Map,r=Et(e),s=Z(0),i=ve,u=a=>{if(ve===i)return a();var l=h,f=ve;R(null),wt(i);var o=a();return R(l),wt(f),o};return r&&n.set("length",Z(e.length)),new Proxy(e,{defineProperty(a,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&yn();var o=n.get(l);return o===void 0?o=u(()=>{var _=Z(f.value);return n.set(l,_),_}):se(o,f.value,!0),!0},deleteProperty(a,l){var f=n.get(l);if(f===void 0){if(l in a){const o=u(()=>Z(A));n.set(l,o),Se(s)}}else se(f,A),Se(s);return!0},get(a,l,f){if(l===Ge)return e;var o=n.get(l),_=l in a;if(o===void 0&&(!_||ke(a,l)?.writable)&&(o=u(()=>{var c=Ae(_?a[l]:A),p=Z(c);return p}),n.set(l,o)),o!==void 0){var v=b(o);return v===A?void 0:v}return Reflect.get(a,l,f)},getOwnPropertyDescriptor(a,l){var f=Reflect.getOwnPropertyDescriptor(a,l);if(f&&"value"in f){var o=n.get(l);o&&(f.value=b(o))}else if(f===void 0){var _=n.get(l),v=_?.v;if(_!==void 0&&v!==A)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(a,l){if(l===Ge)return!0;var f=n.get(l),o=f!==void 0&&f.v!==A||Reflect.has(a,l);if(f!==void 0||m!==null&&(!o||ke(a,l)?.writable)){f===void 0&&(f=u(()=>{var v=o?Ae(a[l]):A,c=Z(v);return c}),n.set(l,f));var _=b(f);if(_===A)return!1}return o},set(a,l,f,o){var _=n.get(l),v=l in a;if(r&&l==="length")for(var c=f;c<_.v;c+=1){var p=n.get(c+"");p!==void 0?se(p,A):c in a&&(p=u(()=>Z(A)),n.set(c+"",p))}if(_===void 0)(!v||ke(a,l)?.writable)&&(_=u(()=>Z(void 0)),se(_,Ae(f)),n.set(l,_));else{v=_.v!==A;var w=u(()=>Ae(f));se(_,w)}var d=Reflect.getOwnPropertyDescriptor(a,l);if(d?.set&&d.set.call(o,f),!v){if(r&&typeof l=="string"){var g=n.get("length"),j=Number(l);Number.isInteger(j)&&j>=g.v&&se(g,j+1)}Se(s)}return!0},ownKeys(a){b(s);var l=Reflect.ownKeys(a).filter(_=>{var v=n.get(_);return v===void 0||v.v!==A});for(var[f,o]of n)o.v!==A&&!(f in a)&&l.push(f);return l},setPrototypeOf(){bn()}})}var gt,Ut,Ht,Yt;function $n(){if(gt===void 0){gt=window,Ut=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ht=ke(t,"firstChild").get,Yt=ke(t,"nextSibling").get,dt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),dt(n)&&(n.__t=void 0)}}function Fe(e=""){return document.createTextNode(e)}function Be(e){return Ht.call(e)}function Me(e){return Yt.call(e)}function ie(e,t){return Be(e)}function Wn(e,t=!1){{var n=Be(e);return n instanceof Comment&&n.data===""?Me(n):n}}function Te(e,t=1,n=!1){let r=e;for(;t--;)r=Me(r);return r}function Xn(e){e.textContent=""}function Zn(){return!1}function Kt(e){var t=h,n=m;R(null),X(null);try{return e()}finally{R(t),X(n)}}function Jn(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ce(e,t,n){var r=m;r!==null&&(r.f&q)!==0&&(e|=q);var s={ctx:Y,deps:null,nodes_start:null,nodes_end:null,f:e|O|H,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Ie(s),s.f|=At}catch(a){throw U(s),a}else t!==null&&de(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&xe)===0&&(i=i.first,(e&ee)!==0&&(e&Ne)!==0&&i!==null&&(i.f|=Ne)),i!==null&&(i.parent=r,r!==null&&Jn(i,r),h!==null&&(h.f&x)!==0&&(e&pe)===0)){var u=h;(u.effects??=[]).push(i)}return s}function Re(){return h!==null&&!W}function Qn(e){const t=ce(lt,null,!1);return S(t,k),t.teardown=e,t}function er(e){return ce(Tt|gn,e,!1)}function tr(e){$.ensure();const t=ce(pe|xe,e,!0);return(n={})=>new Promise(r=>{n.outro?Ce(t,()=>{U(t),r(void 0)}):(U(t),r(void 0))})}function nr(e){return ce(ft|xe,e,!0)}function rr(e,t=0){return ce(lt|t,e,!0)}function Je(e,t=[],n=[],r=[]){Bn(r,t,n,s=>{ce(lt,()=>e(...s.map(b)),!0)})}function zt(e,t=0){var n=ce(ee|t,e,!0);return n}function G(e){return ce(oe|xe,e,!0)}function Gt(e){var t=e.teardown;if(t!==null){const n=qe,r=h;mt(!0),R(null);try{t.call(null)}finally{mt(n),R(r)}}}function $t(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Kt(()=>{s.abort(me)});var r=n.next;(n.f&pe)!==0?n.parent=null:U(n,t),n=r}}function ir(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&oe)===0&&U(t),t=n}}function U(e,t=!0){var n=!1;(t||(e.f&kt)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(sr(e.nodes_start,e.nodes_end),n=!0),$t(e,t&&!n),He(e,0),S(e,le);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Gt(e);var s=e.parent;s!==null&&s.first!==null&&Wt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function sr(e,t){for(;e!==null;){var n=e===t?null:Me(e);e.remove(),e=n}}function Wt(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ce(e,t,n=!0){var r=[];ct(e,r,!0),Xt(r,()=>{n&&U(e),t&&t()})}function Xt(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function ct(e,t,n){if((e.f&q)===0){if(e.f^=q,e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&t.push(u);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&Ne)!==0||(r.f&oe)!==0&&(e.f&ee)!==0;ct(r,t,i?n:!1),r=s}}}function Zt(e){Jt(e,!0)}function Jt(e,t){if((e.f&q)!==0){e.f^=q,(e.f&k)===0&&(S(e,O),de(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Ne)!==0||(n.f&oe)!==0;Jt(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function lr(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Me(n);t.append(n),n=s}}let ae=!1;function Ue(e){ae=e}let qe=!1;function mt(e){qe=e}let h=null,W=!1;function R(e){h=e}let m=null;function X(e){m=e}let Q=null;function Qt(e){h!==null&&(Q===null?Q=[e]:Q.push(e))}let N=null,M=0,D=null;function fr(e){D=e}let en=1,Oe=0,ve=Oe;function wt(e){ve=e}function tn(){return++en}function Pe(e){var t=e.f;if((t&O)!==0)return!0;if(t&x&&(e.f&=~_e),(t&te)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(Pe(i)&&jt(i),i.wv>e.wv)return!0}(t&H)!==0&&L===null&&S(e,k)}return!1}function nn(e,t,n=!0){var r=e.reactions;if(r!==null&&!Q?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&x)!==0?nn(i,t,!1):t===i&&(n?S(i,O):(i.f&k)!==0&&S(i,te),de(i))}}function rn(e){var t=N,n=M,r=D,s=h,i=Q,u=Y,a=W,l=ve,f=e.f;N=null,M=0,D=null,h=(f&(oe|pe))===0?e:null,Q=null,ye(e.ctx),W=!1,ve=++Oe,e.ac!==null&&(Kt(()=>{e.ac.abort(me)}),e.ac=null);try{e.f|=tt;var o=e.fn,_=o(),v=e.deps;if(N!==null){var c;if(He(e,M),v!==null&&M>0)for(v.length=M+N.length,c=0;c<N.length;c++)v[M+c]=N[c];else e.deps=v=N;if(ae&&Re()&&(e.f&H)!==0)for(c=M;c<v.length;c++)(v[c].reactions??=[]).push(e)}else v!==null&&M<v.length&&(He(e,M),v.length=M);if(Mt()&&D!==null&&!W&&v!==null&&(e.f&(x|te|O))===0)for(c=0;c<D.length;c++)nn(D[c],e);return s!==null&&s!==e&&(Oe++,D!==null&&(r===null?r=D:r.push(...D))),(e.f&fe)!==0&&(e.f^=fe),_}catch(p){return qt(p)}finally{e.f^=tt,N=t,M=n,D=r,h=s,Q=i,ye(u),W=a,ve=l}}function ur(e,t){let n=t.reactions;if(n!==null){var r=on.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&x)!==0&&(N===null||!N.includes(t))&&(S(t,te),(t.f&H)!==0&&(t.f^=H,t.f&=~_e),Lt(t),He(t,0))}function He(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ur(e,n[r])}function Ie(e){var t=e.f;if((t&le)===0){S(e,k);var n=m,r=ae;m=e,ae=!0;try{(t&(ee|pn))!==0?ir(e):$t(e),Gt(e);var s=rn(e);e.teardown=typeof s=="function"?s:null,e.wv=en;var i;et&&Fn&&(e.f&O)!==0&&e.deps}finally{ae=r,m=n}}}function b(e){var t=e.f,n=(t&x)!==0;if(h!==null&&!W){var r=m!==null&&(m.f&le)!==0;if(!r&&!Q?.includes(e)){var s=h.deps;if((h.f&tt)!==0)e.rv<Oe&&(e.rv=Oe,N===null&&s!==null&&s[M]===e?M++:N===null?N=[e]:N.includes(e)||N.push(e));else{(h.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[h]:i.includes(h)||i.push(h)}}}if(qe){if(ue.has(e))return ue.get(e);if(n){var u=e,a=u.v;return((u.f&k)===0&&u.reactions!==null||ln(u))&&(a=ot(u)),ue.set(u,a),a}}else n&&(!L?.has(e)||y?.is_fork&&!Re())&&(u=e,Pe(u)&&jt(u),ae&&Re()&&(u.f&H)===0&&sn(u));if(L?.has(e))return L.get(e);if((e.f&fe)!==0)throw e.v;return e.v}function sn(e){if(e.deps!==null){e.f^=H;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&x)!==0&&(t.f&H)===0&&sn(t)}}function ln(e){if(e.v===A)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ue.has(t)||(t.f&x)!==0&&ln(t))return!0;return!1}function ar(e){var t=W;try{return W=!0,e()}finally{W=t}}const or=-7169;function S(e,t){e.f=e.f&or|t}const cr=["touchstart","touchmove"];function vr(e){return cr.includes(e)}const fn=new Set,it=new Set;function _r(e){for(var t=0;t<e.length;t++)fn.add(e[t]);for(var n of it)n(e)}let yt=null;function Le(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;yt=e;var u=0,a=yt===e&&e.__root;if(a){var l=s.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=s.indexOf(t);if(f===-1)return;l<=f&&(u=l)}if(i=s[u]||e.target,i!==t){cn(e,"currentTarget",{configurable:!0,get(){return i||n}});var o=h,_=m;R(null),X(null);try{for(var v,c=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var w=i["__"+r];w!=null&&(!i.disabled||e.target===i)&&w.call(i,e)}catch(d){v?c.push(d):v=d}if(e.cancelBubble||p===t||p===null)break;i=p}if(v){for(let d of c)queueMicrotask(()=>{throw d});throw v}}finally{e.__root=t,delete e.currentTarget,R(o),X(_)}}}function dr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function bt(e,t){var n=m;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function ze(e,t){var n=(t&kn)!==0,r=(t&Sn)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=dr(i?e:"<!>"+e),n||(s=Be(s)));var u=r||Ut?document.importNode(s,!0):s.cloneNode(!0);if(n){var a=Be(u),l=u.lastChild;bt(a,l)}else bt(u,u);return u}}function je(e,t){e!==null&&e.before(t)}function Qe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function hr(e,t){return pr(e,t)}const ge=new Map;function pr(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:u=!0}){$n();var a=new Set,l=_=>{for(var v=0;v<_.length;v++){var c=_[v];if(!a.has(c)){a.add(c);var p=vr(c);t.addEventListener(c,Le,{passive:p});var w=ge.get(c);w===void 0?(document.addEventListener(c,Le,{passive:p}),ge.set(c,1)):ge.set(c,w+1)}}};l(st(fn)),it.add(l);var f=void 0,o=tr(()=>{var _=n??t.appendChild(Fe());return Pn(_,{pending:()=>{}},v=>{if(i){Ot({});var c=Y;c.c=i}s&&(r.$$events=s),f=e(v,r)||{},i&&It()}),()=>{for(var v of a){t.removeEventListener(v,Le);var c=ge.get(v);--c===0?(document.removeEventListener(v,Le),ge.delete(v)):ge.set(v,c)}it.delete(l),_!==n&&_.parentNode?.removeChild(_)}});return gr.set(f,o),f}let gr=new WeakMap;const mr="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(mr);var wr=ze('<td class="svelte-1n46o8q"> </td>'),yr=ze('<td class="svelte-1n46o8q"> </td>'),br=ze('<tr class="svelte-1n46o8q"></tr>'),Er=ze('<div style="display: flex; gap: 1em;"><button class="svelte-1n46o8q">Toggle Mode</button> <button class="svelte-1n46o8q">Copy</button></div> <table class="svelte-1n46o8q"><thead><tr class="svelte-1n46o8q"></tr></thead><tbody class="svelte-1n46o8q"><!><tr class="svelte-1n46o8q"><td class="svelte-1n46o8q">Total Calories</td><td class="svelte-1n46o8q"></td><td class="svelte-1n46o8q"> </td></tr></tbody></table>',1);function xr(e,t){Ot(t,!0);let n=Z(!1),r=Ze(()=>b(n)?["Meal Name","Item","Excel Form"]:["Meal Name","Item","Energy (cal)"]);const s=globalThis.excelForm,i=globalThis.regularForm;let u=Ze(()=>b(n)?s:i),a=Ze(()=>i.map(C=>parseFloat(C.at(2)||"0")).reduce((C,T)=>C+T,0));function l(){navigator.clipboard.writeText(b(u).map(C=>C.map(T=>T.trim()).join("	")).join(\`
\`))}var f=Er(),o=Wn(f),_=ie(o);_.__click=()=>se(n,!b(n));var v=Te(_,2);v.__click=l;var c=Te(o,2),p=ie(c),w=ie(p);We(w,21,()=>b(r),$e,(C,T)=>{var I=wr(),P=ie(I);Je(()=>Qe(P,b(T))),je(C,I)});var d=Te(p),g=ie(d);We(g,17,()=>b(u),$e,(C,T)=>{var I=br();We(I,21,()=>b(T),$e,(P,F)=>{var re=yr(),K=ie(re);Je(()=>Qe(K,b(F))),je(P,re)}),je(C,I)});var j=Te(g),ne=Te(ie(j),2),E=ie(ne);Je(()=>Qe(E,b(a))),je(e,f),It()}_r(["click"]);hr(xr,{target:document.getElementById("app")});
`;var I={};ie(I,{alert:()=>lr,configureVimMode:()=>Cr,confirm:()=>sr,copyToClipboard:()=>yr,deleteLine:()=>xr,dispatch:()=>or,downloadFile:()=>Gt,filterBox:()=>Qt,flashNotification:()=>zt,fold:()=>cr,foldAll:()=>dr,getCurrentEditor:()=>$t,getCurrentPage:()=>Ct,getCurrentPageMeta:()=>At,getCurrentPath:()=>St,getCursor:()=>kt,getRecentlyOpenedPages:()=>Et,getSelection:()=>Ft,getText:()=>Tt,getUiOption:()=>ar,goHistory:()=>Wt,hidePanel:()=>Yt,insertAtCursor:()=>nr,insertAtPos:()=>Zt,invokeCommand:()=>Dt,isMobile:()=>Sr,moveCursor:()=>tr,moveCursorToLine:()=>rr,moveLineDown:()=>Pr,moveLineUp:()=>br,navigate:()=>Rt,newWindow:()=>It,openCommandPalette:()=>qt,openPageNavigator:()=>Bt,openSearchPanel:()=>vr,openUrl:()=>Nt,prompt:()=>ir,rebuildEditorState:()=>Lt,redo:()=>hr,reloadConfigAndCommands:()=>Vt,reloadPage:()=>jt,reloadUI:()=>Ot,replaceRange:()=>er,save:()=>Ut,sendMessage:()=>Ar,setSelection:()=>Kt,setText:()=>Mt,setUiOption:()=>ur,showPanel:()=>Jt,showProgress:()=>Xt,toggleComment:()=>wr,toggleFold:()=>pr,undo:()=>mr,unfold:()=>fr,unfoldAll:()=>gr,uploadFile:()=>Ht,vimEx:()=>_r});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function a(t,...n){return globalThis.syscall(t,...n)}function Ct(){return a("editor.getCurrentPage")}function At(){return a("editor.getCurrentPageMeta")}function St(){return a("editor.getCurrentPath")}function Et(){return a("editor.getRecentlyOpenedPages")}function $t(){return a("editor.getCurrentEditor")}function Tt(){return a("editor.getText")}function Mt(t,n=!1){return a("editor.setText",t,n)}function kt(){return a("editor.getCursor")}function Ft(){return a("editor.getSelection")}function Kt(t,n){return a("editor.setSelection",t,n)}function Dt(t,n){return a("editor.invokeCommand",t,n)}function Ut(){return a("editor.save")}function Rt(t,n=!1,e=!1){return a("editor.navigate",t,n,e)}function Bt(t="page"){return a("editor.openPageNavigator",t)}function qt(){return a("editor.openCommandPalette")}function jt(){return a("editor.reloadPage")}function Ot(){return a("editor.reloadUI")}function Lt(){return a("editor.rebuildEditorState")}function Vt(){return a("editor.reloadConfigAndCommands")}function Nt(t,n=!1){return a("editor.openUrl",t,n)}function It(){return a("editor.newWindow")}function Wt(t){return a("editor.goHistory",t)}function Gt(t,n){return a("editor.downloadFile",t,n)}function Ht(t,n){return a("editor.uploadFile",t,n)}function zt(t,n="info"){return a("editor.flashNotification",t,n)}function Qt(t,n,e="",u=""){return a("editor.filterBox",t,n,e,u)}function Jt(t,n,e,u=""){return a("editor.showPanel",t,n,e,u)}function Yt(t){return a("editor.hidePanel",t)}function Xt(t,n){return a("editor.showProgress",t,n)}function Zt(t,n){return a("editor.insertAtPos",t,n)}function er(t,n,e){return a("editor.replaceRange",t,n,e)}function tr(t,n=!1){return a("editor.moveCursor",t,n)}function rr(t,n=1,e=!1){return a("editor.moveCursorToLine",t,n,e)}function nr(t,n=!1,e=!1){return a("editor.insertAtCursor",t,n,e)}function or(t){return a("editor.dispatch",t)}function ir(t,n=""){return a("editor.prompt",t,n)}function sr(t){return a("editor.confirm",t)}function lr(t){return a("editor.alert",t)}function ar(t){return a("editor.getUiOption",t)}function ur(t,n){return a("editor.setUiOption",t,n)}function cr(){return a("editor.fold")}function fr(){return a("editor.unfold")}function pr(){return a("editor.toggleFold")}function dr(){return a("editor.foldAll")}function gr(){return a("editor.unfoldAll")}function mr(){return a("editor.undo")}function hr(){return a("editor.redo")}function vr(){return a("editor.openSearchPanel")}function yr(t){return a("editor.copyToClipboard",t)}function xr(){return a("editor.deleteLine")}function wr(){return a("editor.toggleComment")}function br(){return a("editor.moveLineUp")}function Pr(){return a("editor.moveLineDown")}function _r(t){return a("editor.vimEx",t)}function Cr(){return a("editor.configureVimMode")}function Ar(t,n){return a("editor.sendMessage",t,n)}function Sr(){return a("editor.isMobile")}var W={};ie(W,{expandMarkdown:()=>Tr,markdownToHtml:()=>Mr,parseMarkdown:()=>Er,renderParseTree:()=>$r});function Er(t){return a("markdown.parseMarkdown",t)}function $r(t){return a("markdown.renderParseTree",t)}function Tr(t){return a("markdown.expandMarkdown",t)}function Mr(t){return a("markdown.markdownToHtml",t)}var G={};ie(G,{deleteDocument:()=>Vr,deleteFile:()=>Hr,deletePage:()=>Rr,fileExists:()=>zr,getDocumentMeta:()=>jr,getFileMeta:()=>Wr,getPageMeta:()=>Fr,listDocuments:()=>qr,listFiles:()=>Nr,listPages:()=>kr,listPlugs:()=>Br,pageExists:()=>Kr,readDocument:()=>Or,readFile:()=>Ir,readPage:()=>Dr,writeDocument:()=>Lr,writeFile:()=>Gr,writePage:()=>Ur});function kr(){return a("space.listPages")}function Fr(t){return a("space.getPageMeta",t)}function Kr(t){return a("space.pageExists",t)}function Dr(t){return a("space.readPage",t)}function Ur(t,n){return a("space.writePage",t,n)}function Rr(t){return a("space.deletePage",t)}function Br(){return a("space.listPlugs")}function qr(){return a("space.listDocuments")}function jr(t){return a("space.getDocumentMeta",t)}function Or(t){return a("space.readDocument",t)}function Lr(t,n){return a("space.writeDocument",t,n)}function Vr(t){return a("space.deleteDocument",t)}function Nr(){return a("space.listFiles")}function Ir(t){return a("space.readFile",t)}function Wr(t){return a("space.getFileMeta",t)}function Gr(t,n){return a("space.writeFile",t,n)}function Hr(t){return a("space.deleteFile",t)}function zr(t){return a("space.fileExists",t)}var In=new Uint8Array(16);function Re(t){return t?.children?.map(n=>n.text).join("")}async function Be(){let t=await G.readPage(await I.getCurrentPage()),n=await W.parseMarkdown(t),e=[];return n.children?.forEach(u=>{if(u.type=="FencedCode"){let p=Re(u.children?.filter(b=>b.type=="CodeInfo")?.at(0)),w=Re(u.children?.filter(b=>b.type=="CodeText")?.at(0));p&&w&&p.trim()=="calorie"&&(e=[...e,w])}}),e}function $(t,n){if(typeof t=="number")return t;switch(t.type){case"variable":return n;case"*":return $(t.left,n)*$(t.right,n);case"/":return $(t.left,n)/$(t.right,n);case"+":return $(t.left,n)+$(t.right,n);case"-":return $(t.left,n)-$(t.right,n);default:if(typeof t=="number")return t;throw Error("unreachable; wonky logic")}}function je(t,n){function e(u){return"type"in u&&u.type=="variable"?n:u}return{name:t.name,items:t.items.map(u=>({...u,formula:e(u.formula)}))}}function fn(t,n){function e(u){return typeof u=="number"?u.toString():u.type?u.type!="variable"?`${e(u.left)} ${u.type} ${e(u.right)}`:n.toString():u.toString()}return e(t)}function H(t){let n=(0,U.parse)(t);return{name:n.name,items:n.items.map(u=>({name:u.name.trim(),serving:`${u.serving} ${u.unit}`,energy:$(u.formula,u.serving)}))}}async function Oe(){return(await Be()).map(n=>H(n))}function pn(t){let n=(0,U.parse)(t);return{name:n.name,items:n.items.map(u=>({name:u.name.trim(),serving:`${u.serving} ${u.unit}`,energy:"="+fn(u.formula,u.serving)}))}}function qe(t){let n=[];return t.items.length>0&&(n.push([t.name,`${t.items[0].serving} ${t.items[0].name}`,t.items[0].energy]),t.items.slice(1).forEach(e=>{n.push(["",`${e.serving} ${e.name}`,e.energy])})),n}function Le(t){let n=qe(pn(t)),e=qe(H(t)),u=`
    globalThis.excelForm = ${JSON.stringify(n)};
    globalThis.regularForm = ${JSON.stringify(e)};
    ${Ue}
  `;return{html:De,script:u}}var Ve={showWidget:Le,evaluateCalories:H,replaceVariable:je,parseCalorieBlocks:Oe},Ne={name:"joule",functions:{showWidget:{path:"src/joule.ts:calorieWidget",codeWidget:"calorie"},evaluateCalories:{path:"src/joule.ts:evaluateCalories",syscall:"joule.evaluateCalories"},replaceVariable:{path:"src/joule.ts:replaceVariable",syscall:"joule.replaceVariable"},parseCalorieBlocks:{path:"src/joule.ts:GetPageMeals",syscall:"joule.getPageCalorieBlocks"}},assets:{}},xo={manifest:Ne,functionMapping:Ve};ke(Ve,Ne,self.postMessage);export{xo as plug};

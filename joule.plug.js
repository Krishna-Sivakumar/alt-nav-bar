var St=Object.create;var ie=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var Tt=Object.getOwnPropertyNames;var Mt=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty;var Ft=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),se=(t,i)=>{for(var e in i)ie(t,e,{get:i[e],enumerable:!0})},Kt=(t,i,e,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let p of Tt(i))!kt.call(t,p)&&p!==e&&ie(t,p,{get:()=>i[p],enumerable:!(u=Et(i,p))||u.enumerable});return t};var Dt=(t,i,e)=>(e=t!=null?St(Mt(t)):{},Kt(i||!t||!t.__esModule?ie(e,"default",{value:t,enumerable:!0}):e,t));var Re=Ft((Hn,Ue)=>{"use strict";var K=class extends SyntaxError{constructor(i,e,u,p){super(i),this.expected=e,this.found=u,this.location=p,this.name="SyntaxError"}format(i){let e="Error: "+this.message;if(this.location){let u=null,p=i.find($=>$.source===this.location.source);p&&(u=p.text.split(/\r\n|\n|\r/g));let b=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,A=this.location.source+":"+w.line+":"+w.column;if(u){let $=this.location.end,E="".padEnd(w.line.toString().length," "),k=u[b.line-1],y=(b.line===$.line?$.column:k.length+1)-b.column||1;e+=`
 --> `+A+`
`+E+` |
`+w.line+" | "+k+`
`+E+" | "+"".padEnd(b.column-1," ")+"".padEnd(y,"^")}else e+=`
 at `+A}return e}static buildMessage(i,e){function u(y){return y.codePointAt(0).toString(16).toUpperCase()}let p=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function b(y){return p?y.replace(p,v=>"\\u{"+u(v)+"}"):y}function w(y){return b(y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+u(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+u(v)))}function A(y){return b(y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+u(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+u(v)))}let $={literal(y){return'"'+w(y.text)+'"'},class(y){let v=y.parts.map(S=>Array.isArray(S)?A(S[0])+"-"+A(S[1]):A(S));return"["+(y.inverted?"^":"")+v.join("")+"]"+(y.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(y){return y.description}};function E(y){return $[y.type](y)}function k(y){let v=y.map(E);if(v.sort(),v.length>0){let S=1;for(let M=1;M<v.length;M++)v[M-1]!==v[M]&&(v[S]=v[M],S++);v.length=S}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function U(y){return y?'"'+w(y)+'"':"end of input"}return"Expected "+k(i)+" but "+U(e)+" found."}};function Bt(t,i){i=i!==void 0?i:{};let e={},u=i.grammarSource,p={Meal:$e},b=$e,w=`
`,A="(",$=")",E="serving",k="slice",U="slices",y="grams",v="gram",S="g",M="cups",de="cup",ge="tablespoon",me="tbsp",he="teaspoon",ve="tsp",He="s",Qe=".",ye=/^[A-z0-9 '";,]/,L=/^[+\-]/,q=/^[*\/]/,V=/^[0-9]/,xe=/^[ \t\n\r]/,ze=_(`
`,!1),J=_("(",!1),Y=_(")",!1),be=_("serving",!1),Ge=_("slice",!1),Je=_("slices",!1),Ye=_("grams",!1),Xe=_("gram",!1),Ze=_("g",!1),et=_("cups",!1),tt=_("cup",!1),rt=_("tablespoon",!1),nt=_("tbsp",!1),ot=_("teaspoon",!1),it=_("tsp",!1),we=B([["A","z"],["0","9"]," ","'",'"',";",","],!1,!1,!1),N=B(["+","-"],!1,!1,!1),I=B(["*","/"],!1,!1,!1),st=_("s",!1),W=B([["0","9"]],!1,!1,!1),lt=_(".",!1),Pe=B([" ","	",`
`,"\r"],!1,!1,!1);function at(r,s){return{name:r,items:s}}function ut(r,s,o,f){return{serving:r,unit:s||"",name:o,formula:f}}function Sn(r){return r}function En(r){return r}function ct(){return _e()}function ft(r,s){let o=r;for(let f in s){let[m,a]=s[f];o={type:m,left:a,right:o}}return o}function pt(r,s){let o=r;for(let f in s){let[m,a]=s[f];o={type:m,left:a,right:o}}return o}function Tn(r){return r}function Mn(r){return r}function dt(){return{type:"variable"}}function gt(r,s){let o=r;for(let f in s){let[m,a]=s[f];m=="+"?o={}:m=="-"&&(o-=a)}return o}function mt(r,s){let o=r;for(let f in s){let[m,a]=s[f];m=="*"?o*=a:m=="/"&&(o/=a)}return o}function kn(r){return r}function Fn(r){return r}function ht(){return parseFloat(_e())}let n=i.peg$currPos|0,P=n,F=[{line:1,column:1}],C=n,H=i.peg$maxFailExpected||[],d=i.peg$silentFails|0,R;if(i.startRule){if(!(i.startRule in p))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');b=p[i.startRule]}function _e(){return t.substring(P,n)}function Kn(){return P}function Dn(){return{source:u,start:P,end:n}}function Un(){return j(P,n)}function Rn(r,s){throw s=s!==void 0?s:j(P,n),Ae([xt(r)],t.substring(P,n),s)}function Bn(r,s){throw s=s!==void 0?s:j(P,n),bt(r,s)}function vt(r=n){let s=t.codePointAt(r);return s===void 0?"":String.fromCodePoint(s)}function _(r,s){return{type:"literal",text:r,ignoreCase:s}}function B(r,s,o,f){return{type:"class",parts:r,inverted:s,ignoreCase:o,unicode:f}}function jn(){return{type:"any"}}function yt(){return{type:"end"}}function xt(r){return{type:"other",description:r}}function Ce(r){let s=F[r],o;if(s)return s;if(r>=F.length)o=F.length-1;else for(o=r;!F[--o];);for(s=F[o],s={line:s.line,column:s.column};o<r;)t.charCodeAt(o)===10?(s.line++,s.column=1):s.column++,o++;return F[r]=s,s}function j(r,s,o){let f=Ce(r),m=Ce(s),a={source:u,start:{offset:r,line:f.line,column:f.column},end:{offset:s,line:m.line,column:m.column}};return o&&u&&typeof u.offset=="function"&&(a.start=u.offset(a.start),a.end=u.offset(a.end)),a}function g(r){n<C||(n>C&&(C=n,H=[]),H.push(r))}function bt(r,s){return new K(r,null,null,s)}function Ae(r,s,o){return new K(K.buildMessage(r,s),r,s,o)}function $e(){let r,s,o,f;return r=n,s=Ee(),s!==e?(t.charCodeAt(n)===10?(o=w,n++):(o=e,d===0&&g(ze)),o!==e?(f=wt(),P=r,r=at(s,f)):(n=r,r=e)):(n=r,r=e),r}function wt(){let r,s;for(r=[],s=Se();s!==e;)r.push(s),s=Se();return r}function Se(){let r,s,o,f,m,a,c,h,oe,$t;return r=n,s=x(),o=ee(),o!==e?(f=Pt(),f===e&&(f=null),m=_t(),m!==e?(a=x(),t.charCodeAt(n)===40?(c=A,n++):(c=e,d===0&&g(J)),c!==e?(h=Ct(),h!==e?(t.charCodeAt(n)===41?(oe=$,n++):(oe=e,d===0&&g(Y)),oe!==e?($t=x(),P=r,r=ut(o,f,m,h)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e),r}function Pt(){let r,s,o,f;return r=n,s=x(),t.substr(n,7)===E?(o=E,n+=7):(o=e,d===0&&g(be)),o===e&&(t.substr(n,5)===k?(o=k,n+=5):(o=e,d===0&&g(Ge)),o===e&&(t.substr(n,6)===U?(o=U,n+=6):(o=e,d===0&&g(Je)),o===e&&(t.substr(n,5)===y?(o=y,n+=5):(o=e,d===0&&g(Ye)),o===e&&(t.substr(n,4)===v?(o=v,n+=4):(o=e,d===0&&g(Xe)),o===e&&(t.charCodeAt(n)===103?(o=S,n++):(o=e,d===0&&g(Ze)),o===e&&(t.substr(n,4)===M?(o=M,n+=4):(o=e,d===0&&g(et)),o===e&&(t.substr(n,3)===de?(o=de,n+=3):(o=e,d===0&&g(tt)),o===e&&(t.substr(n,10)===ge?(o=ge,n+=10):(o=e,d===0&&g(rt)),o===e&&(t.substr(n,4)===me?(o=me,n+=4):(o=e,d===0&&g(nt)),o===e&&(t.substr(n,8)===he?(o=he,n+=8):(o=e,d===0&&g(ot)),o===e&&(t.substr(n,3)===ve?(o=ve,n+=3):(o=e,d===0&&g(it))))))))))))),o!==e?(f=x(),P=r,r=o):(n=r,r=e),r}function _t(){let r,s,o,f;return r=n,s=x(),o=Ee(),o!==e?(f=x(),P=r,r=o):(n=r,r=e),r}function Ee(){let r,s,o;if(r=n,s=[],o=t.charAt(n),ye.test(o)?n++:(o=e,d===0&&g(we)),o!==e)for(;o!==e;)s.push(o),o=t.charAt(n),ye.test(o)?n++:(o=e,d===0&&g(we));else s=e;return s!==e&&(P=r,s=ct()),r=s,r}function Ct(){let r,s,o,f,m,a,c,h;if(r=n,s=x(),o=X(),o!==e){for(f=x(),m=[],a=n,c=t.charAt(n),L.test(c)?n++:(c=e,d===0&&g(N)),c!==e?(h=X(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a!==e;)m.push(a),a=n,c=t.charAt(n),L.test(c)?n++:(c=e,d===0&&g(N)),c!==e?(h=X(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a=x(),P=r,r=ft(o,m)}else n=r,r=e;return r}function X(){let r,s,o,f,m,a,c,h;if(r=n,s=x(),o=Z(),o!==e){for(f=x(),m=[],a=n,c=t.charAt(n),q.test(c)?n++:(c=e,d===0&&g(I)),c!==e?(h=Z(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a!==e;)m.push(a),a=n,c=t.charAt(n),q.test(c)?n++:(c=e,d===0&&g(I)),c!==e?(h=Z(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a=x(),P=r,r=pt(o,m)}else n=r,r=e;return r}function Z(){let r,s,o,f;return r=n,s=x(),o=Te(),o!==e?(f=x(),P=r,r=o):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===40?(s=A,n++):(s=e,d===0&&g(J)),s!==e?(o=ee(),o!==e?(t.charCodeAt(n)===41?(f=$,n++):(f=e,d===0&&g(Y)),f!==e?(P=r,r=o):(n=r,r=e)):(n=r,r=e)):(n=r,r=e),r===e&&(r=At())),r}function At(){let r,s,o;return r=n,s=x(),t.substr(n,7)===E?(o=E,n+=7):(o=e,d===0&&g(be)),o!==e?(s=[s,o],r=s):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===115?(s=He,n++):(s=e,d===0&&g(st)),s!==e?(o=x(),P=r,r=dt()):(n=r,r=e)),r}function ee(){let r,s,o,f,m,a,c,h;if(r=n,s=x(),o=te(),o!==e){for(f=x(),m=[],a=n,c=t.charAt(n),L.test(c)?n++:(c=e,d===0&&g(N)),c!==e?(h=te(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a!==e;)m.push(a),a=n,c=t.charAt(n),L.test(c)?n++:(c=e,d===0&&g(N)),c!==e?(h=te(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a=x(),P=r,r=gt(o,m)}else n=r,r=e;return r}function te(){let r,s,o,f,m,a,c,h;if(r=n,s=x(),o=re(),o!==e){for(f=x(),m=[],a=n,c=t.charAt(n),q.test(c)?n++:(c=e,d===0&&g(I)),c!==e?(h=re(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a!==e;)m.push(a),a=n,c=t.charAt(n),q.test(c)?n++:(c=e,d===0&&g(I)),c!==e?(h=re(),h!==e?(c=[c,h],a=c):(n=a,a=e)):(n=a,a=e);a=x(),P=r,r=mt(o,m)}else n=r,r=e;return r}function re(){let r,s,o,f;return r=n,s=x(),o=Te(),o!==e?(f=x(),P=r,r=o):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===40?(s=A,n++):(s=e,d===0&&g(J)),s!==e?(o=ee(),o!==e?(t.charCodeAt(n)===41?(f=$,n++):(f=e,d===0&&g(Y)),f!==e?(P=r,r=o):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)),r}function Te(){let r,s,o,f,m,a;if(r=n,s=[],o=t.charAt(n),V.test(o)?n++:(o=e,d===0&&g(W)),o!==e)for(;o!==e;)s.push(o),o=t.charAt(n),V.test(o)?n++:(o=e,d===0&&g(W));else s=e;if(s!==e){if(o=n,t.charCodeAt(n)===46?(f=Qe,n++):(f=e,d===0&&g(lt)),f!==e){if(m=[],a=t.charAt(n),V.test(a)?n++:(a=e,d===0&&g(W)),a!==e)for(;a!==e;)m.push(a),a=t.charAt(n),V.test(a)?n++:(a=e,d===0&&g(W));else m=e;m!==e?(f=[f,m],o=f):(n=o,o=e)}else n=o,o=e;o===e&&(o=null),P=r,r=ht()}else n=r,r=e;return r}function x(){let r,s;for(d++,r=[],s=t.charAt(n),xe.test(s)?n++:(s=e,d===0&&g(Pe));s!==e;)r.push(s),s=t.charAt(n),xe.test(s)?n++:(s=e,d===0&&g(Pe));return d--,r}R=b();let ne=R!==e&&n===t.length;function Me(){throw R!==e&&n<t.length&&g(yt()),Ae(H,C<t.length?vt(C):null,C<t.length?j(C,C+1):j(C,C))}if(i.peg$library)return{peg$result:R,peg$currPos:n,peg$FAILED:e,peg$maxFailExpected:H,peg$maxFailPos:C,peg$success:ne,peg$throw:ne?void 0:Me};if(ne)return R;Me()}Ue.exports={StartRules:["Meal"],SyntaxError:K,parse:Bt}});function ke(t){let i=atob(t),e=i.length,u=new Uint8Array(e);for(let p=0;p<e;p++)u[p]=i.charCodeAt(p);return u}function le(t){typeof t=="string"&&(t=new TextEncoder().encode(t));let i="",e=t.byteLength;for(let u=0;u<e;u++)i+=String.fromCharCode(t[u]);return btoa(i)}var Ln=new Uint8Array(16);var ae=class{constructor(i="",e=1e3){this.prefix=i;this.maxCaptureSize=e;this.prefix=i,this.originalConsole={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),debug:console.debug.bind(console)},this.patchConsole()}originalConsole;logBuffer=[];patchConsole(){let i=e=>(...u)=>{let p=this.prefix?[this.prefix,...u]:u;this.originalConsole[e](...p),this.captureLog(e,u)};console.log=i("log"),console.info=i("info"),console.warn=i("warn"),console.error=i("error"),console.debug=i("debug")}captureLog(i,e){let u={level:i,timestamp:Date.now(),message:e.map(p=>{if(typeof p=="string")return p;try{return JSON.stringify(p)}catch{return String(p)}}).join(" ")};this.logBuffer.push(u),this.logBuffer.length>this.maxCaptureSize&&this.logBuffer.shift()}async postToServer(i,e){if(this.logBuffer.length>0){let p=[...this.logBuffer];this.logBuffer=[];try{if(!(await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p.map(w=>({...w,source:e})))})).ok)throw new Error("Failed to post logs to server")}catch(b){console.warn("Could not post logs to server",b.message),this.logBuffer.unshift(...p)}}}},Fe;function Ke(t=""){return Fe=new ae(t),Fe}var O=t=>{throw new Error("Not initialized yet")},fe=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var ce=new Map,ue=0;fe&&(globalThis.syscall=async(t,...i)=>await new Promise((e,u)=>{ue++,ce.set(ue,{resolve:e,reject:u}),O({type:"sys",id:ue,name:t,args:i})}));function De(t,i,e){fe&&(O=e,self.addEventListener("message",u=>{(async()=>{let p=u.data;switch(p.type){case"inv":{let b=t[p.name];if(!b)throw new Error(`Function not loaded: ${p.name}`);try{let w=await Promise.resolve(b(...p.args||[]));O({type:"invr",id:p.id,result:w})}catch(w){console.error("An exception was thrown as a result of invoking function",p.name,"error:",w.message),O({type:"invr",id:p.id,error:w.message})}}break;case"sysr":{let b=p.id,w=ce.get(b);if(!w)throw Error("Invalid request id");ce.delete(b),p.error?w.reject(new Error(p.error)):w.resolve(p.result)}break}})().catch(console.error)}),O({type:"manifest",manifest:i}),Ke(`[${i.name} plug]`))}async function Ut(t,i){if(typeof t!="string"){let e=new Uint8Array(await t.arrayBuffer()),u=e.length>0?le(e):void 0;i={method:t.method,headers:Object.fromEntries(t.headers.entries()),base64Body:u},t=t.url}return syscall("sandboxFetch.fetch",t,i)}globalThis.nativeFetch=globalThis.fetch;function Rt(){globalThis.fetch=async function(t,i){let e=i&&i.body?le(new Uint8Array(await new Response(i.body).arrayBuffer())):void 0,u=await Ut(t,i&&{method:i.method,headers:i.headers,base64Body:e});return new Response(u.base64Body?ke(u.base64Body):null,{status:u.status,headers:u.headers})}}fe&&Rt();var D=Dt(Re());var Be=`<style>table.svelte-1n46o8q{color:#fff;width:100%;border-collapse:collapse;margin:1em 0 0}tr.svelte-1n46o8q:nth-child(odd){background:#000}tbody.svelte-1n46o8q>tr:where(.svelte-1n46o8q):nth-child(2n){background:#000}tbody.svelte-1n46o8q>tr:where(.svelte-1n46o8q):nth-child(odd){background:gray}td.svelte-1n46o8q{padding:.6rem}button.svelte-1n46o8q{padding:.25em 1em;background:#000c;border:1px solid gray;border-radius:4px;font-weight:700;color:#fff;font-size:medium}</style>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calorie-table</title>
    <script type="module" crossorigin src="/calorie-table.js"><\/script>
    <link rel="stylesheet" crossorigin href="/calorie-table.css">
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
`;var je=`(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ge=!1;var wt=Array.isArray,rn=Array.prototype.indexOf,Je=Array.from,sn=Object.defineProperty,be=Object.getOwnPropertyDescriptor,ln=Object.prototype,fn=Array.prototype,un=Object.getPrototypeOf,ut=Object.isExtensible;function an(e){for(var t=0;t<e.length;t++)e[t]()}function yt(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const x=2,bt=4,Qe=8,on=1<<24,X=16,ie=32,oe=64,Ve=128,j=512,k=1024,C=2048,Z=4096,O=8192,ee=16384,Et=32768,Te=65536,at=1<<17,xt=1<<18,me=1<<19,cn=1<<20,fe=32768,$e=1<<21,et=1<<22,te=1<<23,Ue=Symbol("$state"),de=new class extends Error{name="StaleReactionError";message="The reaction that called \`getAbortSignal()\` was re-run or destroyed"};function vn(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function _n(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function dn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function pn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function gn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const mn=1,wn=2,yn=16,bn=1,En=2,T=Symbol();function xn(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Tt(e){return e===this.v}function Tn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function kt(e){return!Tn(e,this.v)}let kn=!1,V=null;function pe(e){V=e}function At(e,t=!1,n){V={p:V,i:!1,c:null,e:null,s:e,x:null,l:null}}function St(e){var t=V,n=t.e;if(n!==null){t.e=null;for(var r of n)Wn(r)}return t.i=!0,V=t.p,{}}function Ft(){return!0}let he=[];function An(){var e=he;he=[],an(e)}function tt(e){if(he.length===0){var t=he;queueMicrotask(()=>{t===he&&An()})}he.push(e)}function Nt(e){var t=p;if(t===null)return h.f|=te,e;if((t.f&Et)===0){if((t.f&Ve)===0)throw e;t.b.error(e)}else ge(e,t)}function ge(e,t){for(;t!==null;){if((t.f&Ve)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Me=new Set;let y=null,I=null,U=[],nt=null,We=!1;class H{committed=!1;current=new Map;previous=new Map;#n=new Set;#r=new Set;#c=0;#s=0;#u=null;#l=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#s>0}process(t){U=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#e(r,n);this.is_fork||this.#a(),this.is_deferred()?(this.#t(n.effects),this.#t(n.render_effects),this.#t(n.block_effects)):(y=null,ot(n.render_effects),ot(n.effects),this.#u?.resolve()),I=null}#e(t,n){t.f^=k;for(var r=t.first;r!==null;){var s=r.f,i=(s&(ie|oe))!==0,a=i&&(s&k)!==0,u=a||(s&O)!==0||this.skipped_effects.has(r);if((r.f&Ve)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!u&&r.fn!==null){i?r.f^=k:(s&bt)!==0?n.effects.push(r):Oe(r)&&((r.f&X)!==0&&n.block_effects.push(r),Ne(r));var l=r.first;if(l!==null){r=l;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(this.#t(n.effects),this.#t(n.render_effects),this.#t(n.block_effects),n=n.parent),r=f.next,f=f.parent}}#t(t){for(const n of t)((n.f&C)!==0?this.#l:this.#i).push(n),this.#f(n.deps),A(n,k)}#f(t){if(t!==null)for(const n of t)(n.f&x)===0||(n.f&fe)===0||(n.f^=fe,this.#f(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&te)===0&&(this.current.set(t,t.v),I?.set(t,t.v))}activate(){y=this,this.apply()}deactivate(){y===this&&(y=null,I=null)}flush(){if(this.activate(),U.length>0){if(Sn(),y!==null&&y!==this)return}else this.#c===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#r)t(this);this.#r.clear()}#a(){if(this.#s===0){for(const t of this.#n)t();this.#n.clear()}this.#c===0&&this.#o()}#o(){if(Me.size>1){this.previous.clear();var t=I,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of Me){if(i===this){n=!1;continue}const a=[];for(const[l,f]of this.current){if(i.current.has(l))if(n&&f!==i.current.get(l))i.current.set(l,f);else continue;a.push(l)}if(a.length===0)continue;const u=[...i.current.keys()].filter(l=>!this.current.has(l));if(u.length>0){var s=U;U=[];const l=new Set,f=new Map;for(const o of a)Ct(o,u,l,f);if(U.length>0){y=i,i.apply();for(const o of U)i.#e(o,r);i.deactivate()}U=s}}y=null,I=t}this.committed=!0,Me.delete(this)}increment(t){this.#c+=1,t&&(this.#s+=1)}decrement(t){this.#c-=1,t&&(this.#s-=1),this.revive()}revive(){for(const t of this.#l)A(t,C),ue(t);for(const t of this.#i)A(t,Z),ue(t);this.#l=[],this.#i=[],this.flush()}oncommit(t){this.#n.add(t)}ondiscard(t){this.#r.add(t)}settled(){return(this.#u??=yt()).promise}static ensure(){if(y===null){const t=y=new H;Me.add(y),H.enqueue(()=>{y===t&&t.flush()})}return y}static enqueue(t){tt(t)}apply(){}}function Sn(){var e=re;We=!0;var t=null;try{var n=0;for(Le(!0);U.length>0;){var r=H.ensure();if(n++>1e3){var s,i;Fn()}r.process(U),ne.clear()}}finally{We=!1,Le(e),nt=null}}function Fn(){try{_n()}catch(e){ge(e,nt)}}let $=null;function ot(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(ee|O))===0&&Oe(r)&&($=new Set,Ne(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Yt(r):r.fn=null),$?.size>0)){ne.clear();for(const s of $){if((s.f&(ee|O))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)$.has(a)&&($.delete(a),i.push(a)),a=a.parent;for(let u=i.length-1;u>=0;u--){const l=i[u];(l.f&(ee|O))===0&&Ne(l)}}$.clear()}}$=null}}function Ct(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&x)!==0?Ct(s,t,n,r):(i&(et|X))!==0&&(i&C)===0&&Rt(s,t,r)&&(A(s,C),ue(s))}}function Rt(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&x)!==0&&Rt(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function ue(e){for(var t=nt=e;t.parent!==null;){t=t.parent;var n=t.f;if(We&&t===p&&(n&X)!==0&&(n&xt)===0)return;if((n&(oe|ie))!==0){if((n&k)===0)return;t.f^=k}}U.push(t)}function Nn(e){let t=0,n=ae(0),r;return()=>{Se()&&(E(n),Jn(()=>(t===0&&(r=ir(()=>e(()=>Ee(n)))),t+=1,()=>{tt(()=>{t-=1,t===0&&(r?.(),r=void 0,Ee(n))})})))}}var Cn=Te|me|Ve;function Rn(e,t,n){new On(e,t,n)}class On{parent;#n=!1;#r;#c=null;#s;#u;#l;#i=null;#e=null;#t=null;#f=null;#a=null;#o=0;#v=0;#d=!1;#_=null;#w=Nn(()=>(this.#_=ae(this.#o),()=>{this.#_=null}));constructor(t,n,r){this.#r=t,this.#s=n,this.#u=r,this.parent=p.b,this.#n=!!this.#s.pending,this.#l=Vt(()=>{p.b=this;{var s=this.#g();try{this.#i=Y(()=>r(s))}catch(i){this.error(i)}this.#v>0?this.#p():this.#n=!1}return()=>{this.#a?.remove()}},Cn)}#y(){try{this.#i=Y(()=>this.#u(this.#r))}catch(t){this.error(t)}this.#n=!1}#b(){const t=this.#s.pending;t&&(this.#e=Y(()=>t(this.#r)),H.enqueue(()=>{var n=this.#g();this.#i=this.#h(()=>(H.ensure(),Y(()=>this.#u(n)))),this.#v>0?this.#p():(xe(this.#e,()=>{this.#e=null}),this.#n=!1)}))}#g(){var t=this.#r;return this.#n&&(this.#a=Ae(),this.#r.before(this.#a),t=this.#a),t}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#s.pending}#h(t){var n=p,r=h,s=V;z(this.#l),N(this.#l),pe(this.#l.ctx);try{return t()}catch(i){return Nt(i),null}finally{z(n),N(r),pe(s)}}#p(){const t=this.#s.pending;this.#i!==null&&(this.#f=document.createDocumentFragment(),this.#f.append(this.#a),tr(this.#i,this.#f)),this.#e===null&&(this.#e=Y(()=>t(this.#r)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#v+=t,this.#v===0&&(this.#n=!1,this.#e&&xe(this.#e,()=>{this.#e=null}),this.#f&&(this.#r.before(this.#f),this.#f=null))}update_pending_count(t){this.#m(t),this.#o+=t,this.#_&&ke(this.#_,this.#o)}get_effect_pending(){return this.#w(),E(this.#_)}error(t){var n=this.#s.onerror;let r=this.#s.failed;if(this.#d||!n&&!r)throw t;this.#i&&(L(this.#i),this.#i=null),this.#e&&(L(this.#e),this.#e=null),this.#t&&(L(this.#t),this.#t=null);var s=!1,i=!1;const a=()=>{if(s){xn();return}s=!0,i&&gn(),H.ensure(),this.#o=0,this.#t!==null&&xe(this.#t,()=>{this.#t=null}),this.#n=this.has_pending_snippet(),this.#i=this.#h(()=>(this.#d=!1,Y(()=>this.#u(this.#r)))),this.#v>0?this.#p():this.#n=!1};var u=h;try{N(null),i=!0,n?.(t,a),i=!1}catch(l){ge(l,this.#l&&this.#l.parent)}finally{N(u)}r&&tt(()=>{this.#t=this.#h(()=>{H.ensure(),this.#d=!0;try{return Y(()=>{r(this.#r,()=>t,()=>a)})}catch(l){return ge(l,this.#l.parent),null}finally{this.#d=!1}})})}}function Ye(e,t){return t}function Mn(e,t,n){for(var r=[],s=t.length,i=0;i<s;i++)st(t[i].e,r,!0);Ht(r,()=>{var a=r.length===0&&n!==null;if(a){var u=n,l=u.parentNode;Kn(l),l.append(u),e.items.clear(),q(e,t[0].prev,t[s-1].next)}for(var f=0;f<s;f++){var o=t[f];a||(e.items.delete(o.k),q(e,o.prev,o.next)),L(o.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function He(e,t,n,r,s,i=null){var a=e,u=new Map,l=null;{var f=e;a=f.appendChild(Ae())}var o=null,_=jn(()=>{var m=n();return wt(m)?m:m==null?[]:Je(m)}),c,v=!0;function d(){Pn(b,c,a,t,r),o!==null&&(c.length===0?(o.fragment?(a.before(o.fragment),o.fragment=null):Kt(o.effect),g.first=o.effect):xe(o.effect,()=>{o=null}))}var g=Vt(()=>{c=E(_);for(var m=c.length,w=new Set,D=y,B=null,J=zn(),M=0;M<m;M+=1){var ce=c[M],ve=r(ce,M),F=v?null:u.get(ve);F?(ke(F.v,ce),F.i=M,J&&D.skipped_effects.delete(F.e)):(F=In(v?a:null,B,ce,ve,M,s,t,n),v&&(F.o=!0,B===null?l=F:B.next=F,B=F),u.set(ve,F)),w.add(ve)}if(m===0&&i&&!o)if(v)o={fragment:null,effect:Y(()=>i(a))};else{var lt=document.createDocumentFragment(),ft=Ae();lt.append(ft),o={fragment:lt,effect:Y(()=>i(ft))}}if(!v)if(J){for(const[tn,nn]of u)w.has(tn)||D.skipped_effects.add(nn.e);D.oncommit(d),D.ondiscard(()=>{})}else d();E(_)}),b={effect:g,items:u,first:l};v=!1}function Pn(e,t,n,r,s){var i=t.length,a=e.items,u=e.first,l,f=null,o=[],_=[],c,v,d,g;for(g=0;g<i;g+=1){if(c=t[g],v=s(c,g),d=a.get(v),e.first??=d,!d.o){d.o=!0;var b=f?f.next:u;q(e,f,d),q(e,d,b),Ke(d,b,n),f=d,o=[],_=[],u=f.next;continue}if((d.e.f&O)!==0&&Kt(d.e),d!==u){if(l!==void 0&&l.has(d)){if(o.length<_.length){var m=_[0],w;f=m.prev;var D=o[0],B=o[o.length-1];for(w=0;w<o.length;w+=1)Ke(o[w],m,n);for(w=0;w<_.length;w+=1)l.delete(_[w]);q(e,D.prev,B.next),q(e,f,D),q(e,B,m),u=m,f=B,g-=1,o=[],_=[]}else l.delete(d),Ke(d,u,n),q(e,d.prev,d.next),q(e,d,f===null?e.first:f.next),q(e,f,d),f=d;continue}for(o=[],_=[];u!==null&&u.k!==v;)(u.e.f&O)===0&&(l??=new Set).add(u),_.push(u),u=u.next;if(u===null)continue;d=u}o.push(d),f=d,u=d.next}let J=a.size>i;if(u!==null||l!==void 0){for(var M=l===void 0?[]:Je(l);u!==null;)(u.e.f&O)===0&&M.push(u),u=u.next;var ce=M.length;if(J=a.size-ce>i,ce>0){var ve=i===0?n:null;Mn(e,M,ve)}}if(J)for(const F of a.values())F.o||(q(e,f,F),f=F);e.effect.last=f&&f.e}function In(e,t,n,r,s,i,a,u){var l=(a&mn)!==0,f=(a&yn)===0,o=l?f?Bn(n,!1,!1):ae(n):n,_=(a&wn)===0?s:ae(s),c={i:_,v:o,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Ae())}return c.e=Y(()=>i(e,o,_,u)),t!==null&&(t.next=c),c}finally{}}function Ke(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var a=Ce(i);s.before(i),i=a}}function q(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Dn(e,t,n,r){const s=rt;if(n.length===0&&e.length===0){r(t.map(s));return}var i=y,a=p,u=qn();function l(){Promise.all(n.map(f=>Ln(f))).then(f=>{u();try{r([...t.map(s),...f])}catch(o){(a.f&ee)===0&&ge(o,a)}i?.deactivate(),De()}).catch(f=>{ge(f,a)})}e.length>0?Promise.all(e).then(()=>{u();try{return l()}finally{i?.deactivate(),De()}}):l()}function qn(){var e=p,t=h,n=V,r=y;return function(i=!0){z(e),N(t),pe(n),i&&r?.activate()}}function De(){z(null),N(null),pe(null)}function rt(e){var t=x|C,n=h!==null&&(h.f&x)!==0?h:null;return p!==null&&(p.f|=me),{ctx:V,deps:null,effects:null,equals:Tt,f:t,fn:e,reactions:null,rv:0,v:T,wv:0,parent:n??p,ac:null}}function Ln(e,t){let n=p;n===null&&vn();var r=n.b,s=void 0,i=ae(T),a=!h,u=new Map;return Zn(()=>{var l=yt();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{f===y&&f.committed&&f.deactivate(),De()})}catch(c){l.reject(c),De()}var f=y;if(a){var o=!r.is_pending();r.update_pending_count(1),f.increment(o),u.get(f)?.reject(de),u.delete(f),u.set(f,l)}const _=(c,v=void 0)=>{if(f.activate(),v)v!==de&&(i.f|=te,ke(i,v));else{(i.f&te)!==0&&(i.f^=te),ke(i,c);for(const[d,g]of u){if(u.delete(d),d===f)break;g.reject(de)}}a&&(r.update_pending_count(-1),f.decrement(o))};l.promise.then(_,c=>_(null,c||"unknown"))}),$n(()=>{for(const l of u.values())l.reject(de)}),new Promise(l=>{function f(o){function _(){o===s?l(i):f(s)}o.then(_,_)}f(s)})}function ct(e){const t=rt(e);return Gt(t),t}function jn(e){const t=rt(e);return t.equals=kt,t}function Ot(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)L(t[n])}}function Vn(e){for(var t=e.parent;t!==null;){if((t.f&x)===0)return(t.f&ee)===0?t:null;t=t.parent}return null}function it(e){var t,n=p;z(Vn(e));try{e.f&=~fe,Ot(e),t=Zt(e)}finally{z(n)}return t}function Mt(e){var t=it(e);if(e.equals(t)||(y?.is_fork||(e.v=t),e.wv=Wt()),!Re)if(I!==null)(Se()||y?.is_fork)&&I.set(e,t);else{var n=(e.f&j)===0?Z:k;A(e,n)}}let Xe=new Set;const ne=new Map;let Pt=!1;function ae(e,t){var n={f:0,v:e,reactions:null,equals:Tt,rv:0,wv:0};return n}function G(e,t){const n=ae(e);return Gt(n),n}function Bn(e,t=!1,n=!0){const r=ae(e);return t||(r.equals=kt),r}function Q(e,t,n=!1){h!==null&&(!K||(h.f&at)!==0)&&Ft()&&(h.f&(x|X|et|at))!==0&&!W?.includes(e)&&pn();let r=n?ye(t):t;return ke(e,r)}function ke(e,t){if(!e.equals(t)){var n=e.v;Re?ne.set(e,t):ne.set(e,n),e.v=t;var r=H.ensure();r.capture(e,n),(e.f&x)!==0&&((e.f&C)!==0&&it(e),A(e,(e.f&j)!==0?k:Z)),e.wv=Wt(),It(e,C),p!==null&&(p.f&k)!==0&&(p.f&(ie|oe))===0&&(P===null?nr([e]):P.push(e)),!r.is_fork&&Xe.size>0&&!Pt&&Un()}return t}function Un(){Pt=!1;var e=re;Le(!0);const t=Array.from(Xe);try{for(const n of t)(n.f&k)!==0&&A(n,Z),Oe(n)&&Ne(n)}finally{Le(e)}Xe.clear()}function Ee(e){Q(e,e.v+1)}function It(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],a=i.f,u=(a&C)===0;if(u&&A(i,t),(a&x)!==0){var l=i;I?.delete(l),(a&fe)===0&&(a&j&&(i.f|=fe),It(l,Z))}else u&&((a&X)!==0&&$!==null&&$.add(i),ue(i))}}function ye(e){if(typeof e!="object"||e===null||Ue in e)return e;const t=un(e);if(t!==ln&&t!==fn)return e;var n=new Map,r=wt(e),s=G(0),i=le,a=u=>{if(le===i)return u();var l=h,f=le;N(null),ht(i);var o=u();return N(l),ht(f),o};return r&&n.set("length",G(e.length)),new Proxy(e,{defineProperty(u,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&dn();var o=n.get(l);return o===void 0?o=a(()=>{var _=G(f.value);return n.set(l,_),_}):Q(o,f.value,!0),!0},deleteProperty(u,l){var f=n.get(l);if(f===void 0){if(l in u){const o=a(()=>G(T));n.set(l,o),Ee(s)}}else Q(f,T),Ee(s);return!0},get(u,l,f){if(l===Ue)return e;var o=n.get(l),_=l in u;if(o===void 0&&(!_||be(u,l)?.writable)&&(o=a(()=>{var v=ye(_?u[l]:T),d=G(v);return d}),n.set(l,o)),o!==void 0){var c=E(o);return c===T?void 0:c}return Reflect.get(u,l,f)},getOwnPropertyDescriptor(u,l){var f=Reflect.getOwnPropertyDescriptor(u,l);if(f&&"value"in f){var o=n.get(l);o&&(f.value=E(o))}else if(f===void 0){var _=n.get(l),c=_?.v;if(_!==void 0&&c!==T)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return f},has(u,l){if(l===Ue)return!0;var f=n.get(l),o=f!==void 0&&f.v!==T||Reflect.has(u,l);if(f!==void 0||p!==null&&(!o||be(u,l)?.writable)){f===void 0&&(f=a(()=>{var c=o?ye(u[l]):T,v=G(c);return v}),n.set(l,f));var _=E(f);if(_===T)return!1}return o},set(u,l,f,o){var _=n.get(l),c=l in u;if(r&&l==="length")for(var v=f;v<_.v;v+=1){var d=n.get(v+"");d!==void 0?Q(d,T):v in u&&(d=a(()=>G(T)),n.set(v+"",d))}if(_===void 0)(!c||be(u,l)?.writable)&&(_=a(()=>G(void 0)),Q(_,ye(f)),n.set(l,_));else{c=_.v!==T;var g=a(()=>ye(f));Q(_,g)}var b=Reflect.getOwnPropertyDescriptor(u,l);if(b?.set&&b.set.call(o,f),!c){if(r&&typeof l=="string"){var m=n.get("length"),w=Number(l);Number.isInteger(w)&&w>=m.v&&Q(m,w+1)}Ee(s)}return!0},ownKeys(u){E(s);var l=Reflect.ownKeys(u).filter(_=>{var c=n.get(_);return c===void 0||c.v!==T});for(var[f,o]of n)o.v!==T&&!(f in u)&&l.push(f);return l},setPrototypeOf(){hn()}})}var vt,Dt,qt,Lt;function Yn(){if(vt===void 0){vt=window,Dt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;qt=be(t,"firstChild").get,Lt=be(t,"nextSibling").get,ut(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ut(n)&&(n.__t=void 0)}}function Ae(e=""){return document.createTextNode(e)}function qe(e){return qt.call(e)}function Ce(e){return Lt.call(e)}function we(e,t){return qe(e)}function Hn(e,t=!1){{var n=qe(e);return n instanceof Comment&&n.data===""?Ce(n):n}}function ze(e,t=1,n=!1){let r=e;for(;t--;)r=Ce(r);return r}function Kn(e){e.textContent=""}function zn(){return!1}function jt(e){var t=h,n=p;N(null),z(null);try{return e()}finally{N(t),z(n)}}function Gn(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function se(e,t,n){var r=p;r!==null&&(r.f&O)!==0&&(e|=O);var s={ctx:V,deps:null,nodes_start:null,nodes_end:null,f:e|C|j,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Ne(s),s.f|=Et}catch(u){throw L(s),u}else t!==null&&ue(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&me)===0&&(i=i.first,(e&X)!==0&&(e&Te)!==0&&i!==null&&(i.f|=Te)),i!==null&&(i.parent=r,r!==null&&Gn(i,r),h!==null&&(h.f&x)!==0&&(e&oe)===0)){var a=h;(a.effects??=[]).push(i)}return s}function Se(){return h!==null&&!K}function $n(e){const t=se(Qe,null,!1);return A(t,k),t.teardown=e,t}function Wn(e){return se(bt|cn,e,!1)}function Xn(e){H.ensure();const t=se(oe|me,e,!0);return(n={})=>new Promise(r=>{n.outro?xe(t,()=>{L(t),r(void 0)}):(L(t),r(void 0))})}function Zn(e){return se(et|me,e,!0)}function Jn(e,t=0){return se(Qe|t,e,!0)}function _t(e,t=[],n=[],r=[]){Dn(r,t,n,s=>{se(Qe,()=>e(...s.map(E)),!0)})}function Vt(e,t=0){var n=se(X|t,e,!0);return n}function Y(e){return se(ie|me,e,!0)}function Bt(e){var t=e.teardown;if(t!==null){const n=Re,r=h;dt(!0),N(null);try{t.call(null)}finally{dt(n),N(r)}}}function Ut(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&jt(()=>{s.abort(de)});var r=n.next;(n.f&oe)!==0?n.parent=null:L(n,t),n=r}}function Qn(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ie)===0&&L(t),t=n}}function L(e,t=!0){var n=!1;(t||(e.f&xt)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(er(e.nodes_start,e.nodes_end),n=!0),Ut(e,t&&!n),je(e,0),A(e,ee);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Bt(e);var s=e.parent;s!==null&&s.first!==null&&Yt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function er(e,t){for(;e!==null;){var n=e===t?null:Ce(e);e.remove(),e=n}}function Yt(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function xe(e,t,n=!0){var r=[];st(e,r,!0),Ht(r,()=>{n&&L(e),t&&t()})}function Ht(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function st(e,t,n){if((e.f&O)===0){if(e.f^=O,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&Te)!==0||(r.f&ie)!==0&&(e.f&X)!==0;st(r,t,i?n:!1),r=s}}}function Kt(e){zt(e,!0)}function zt(e,t){if((e.f&O)!==0){e.f^=O,(e.f&k)===0&&(A(e,C),ue(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Te)!==0||(n.f&ie)!==0;zt(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function tr(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Ce(n);t.append(n),n=s}}let re=!1;function Le(e){re=e}let Re=!1;function dt(e){Re=e}let h=null,K=!1;function N(e){h=e}let p=null;function z(e){p=e}let W=null;function Gt(e){h!==null&&(W===null?W=[e]:W.push(e))}let S=null,R=0,P=null;function nr(e){P=e}let $t=1,Fe=0,le=Fe;function ht(e){le=e}function Wt(){return++$t}function Oe(e){var t=e.f;if((t&C)!==0)return!0;if(t&x&&(e.f&=~fe),(t&Z)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(Oe(i)&&Mt(i),i.wv>e.wv)return!0}(t&j)!==0&&I===null&&A(e,k)}return!1}function Xt(e,t,n=!0){var r=e.reactions;if(r!==null&&!W?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&x)!==0?Xt(i,t,!1):t===i&&(n?A(i,C):(i.f&k)!==0&&A(i,Z),ue(i))}}function Zt(e){var t=S,n=R,r=P,s=h,i=W,a=V,u=K,l=le,f=e.f;S=null,R=0,P=null,h=(f&(ie|oe))===0?e:null,W=null,pe(e.ctx),K=!1,le=++Fe,e.ac!==null&&(jt(()=>{e.ac.abort(de)}),e.ac=null);try{e.f|=$e;var o=e.fn,_=o(),c=e.deps;if(S!==null){var v;if(je(e,R),c!==null&&R>0)for(c.length=R+S.length,v=0;v<S.length;v++)c[R+v]=S[v];else e.deps=c=S;if(re&&Se()&&(e.f&j)!==0)for(v=R;v<c.length;v++)(c[v].reactions??=[]).push(e)}else c!==null&&R<c.length&&(je(e,R),c.length=R);if(Ft()&&P!==null&&!K&&c!==null&&(e.f&(x|Z|C))===0)for(v=0;v<P.length;v++)Xt(P[v],e);return s!==null&&s!==e&&(Fe++,P!==null&&(r===null?r=P:r.push(...P))),(e.f&te)!==0&&(e.f^=te),_}catch(d){return Nt(d)}finally{e.f^=$e,S=t,R=n,P=r,h=s,W=i,pe(a),K=u,le=l}}function rr(e,t){let n=t.reactions;if(n!==null){var r=rn.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&x)!==0&&(S===null||!S.includes(t))&&(A(t,Z),(t.f&j)!==0&&(t.f^=j,t.f&=~fe),Ot(t),je(t,0))}function je(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)rr(e,n[r])}function Ne(e){var t=e.f;if((t&ee)===0){A(e,k);var n=p,r=re;p=e,re=!0;try{(t&(X|on))!==0?Qn(e):Ut(e),Bt(e);var s=Zt(e);e.teardown=typeof s=="function"?s:null,e.wv=$t;var i;Ge&&kn&&(e.f&C)!==0&&e.deps}finally{re=r,p=n}}}function E(e){var t=e.f,n=(t&x)!==0;if(h!==null&&!K){var r=p!==null&&(p.f&ee)!==0;if(!r&&!W?.includes(e)){var s=h.deps;if((h.f&$e)!==0)e.rv<Fe&&(e.rv=Fe,S===null&&s!==null&&s[R]===e?R++:S===null?S=[e]:S.includes(e)||S.push(e));else{(h.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[h]:i.includes(h)||i.push(h)}}}if(Re){if(ne.has(e))return ne.get(e);if(n){var a=e,u=a.v;return((a.f&k)===0&&a.reactions!==null||Qt(a))&&(u=it(a)),ne.set(a,u),u}}else n&&(!I?.has(e)||y?.is_fork&&!Se())&&(a=e,Oe(a)&&Mt(a),re&&Se()&&(a.f&j)===0&&Jt(a));if(I?.has(e))return I.get(e);if((e.f&te)!==0)throw e.v;return e.v}function Jt(e){if(e.deps!==null){e.f^=j;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&x)!==0&&(t.f&j)===0&&Jt(t)}}function Qt(e){if(e.v===T)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ne.has(t)||(t.f&x)!==0&&Qt(t))return!0;return!1}function ir(e){var t=K;try{return K=!0,e()}finally{K=t}}const sr=-7169;function A(e,t){e.f=e.f&sr|t}const lr=["touchstart","touchmove"];function fr(e){return lr.includes(e)}const en=new Set,Ze=new Set;function ur(e){for(var t=0;t<e.length;t++)en.add(e[t]);for(var n of Ze)n(e)}let pt=null;function Pe(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;pt=e;var a=0,u=pt===e&&e.__root;if(u){var l=s.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=s.indexOf(t);if(f===-1)return;l<=f&&(a=l)}if(i=s[a]||e.target,i!==t){sn(e,"currentTarget",{configurable:!0,get(){return i||n}});var o=h,_=p;N(null),z(null);try{for(var c,v=[];i!==null;){var d=i.assignedSlot||i.parentNode||i.host||null;try{var g=i["__"+r];g!=null&&(!i.disabled||e.target===i)&&g.call(i,e)}catch(b){c?v.push(b):c=b}if(e.cancelBubble||d===t||d===null)break;i=d}if(c){for(let b of v)queueMicrotask(()=>{throw b});throw c}}finally{e.__root=t,delete e.currentTarget,N(o),z(_)}}}function ar(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function gt(e,t){var n=p;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Be(e,t){var n=(t&bn)!==0,r=(t&En)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ar(i?e:"<!>"+e),n||(s=qe(s)));var a=r||Dt?document.importNode(s,!0):s.cloneNode(!0);if(n){var u=qe(a),l=a.lastChild;gt(u,l)}else gt(a,a);return a}}function Ie(e,t){e!==null&&e.before(t)}function mt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function or(e,t){return cr(e,t)}const _e=new Map;function cr(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){Yn();var u=new Set,l=_=>{for(var c=0;c<_.length;c++){var v=_[c];if(!u.has(v)){u.add(v);var d=fr(v);t.addEventListener(v,Pe,{passive:d});var g=_e.get(v);g===void 0?(document.addEventListener(v,Pe,{passive:d}),_e.set(v,1)):_e.set(v,g+1)}}};l(Je(en)),Ze.add(l);var f=void 0,o=Xn(()=>{var _=n??t.appendChild(Ae());return Rn(_,{pending:()=>{}},c=>{if(i){At({});var v=V;v.c=i}s&&(r.$$events=s),f=e(c,r)||{},i&&St()}),()=>{for(var c of u){t.removeEventListener(c,Pe);var v=_e.get(c);--v===0?(document.removeEventListener(c,Pe),_e.delete(c)):_e.set(c,v)}Ze.delete(l),_!==n&&_.parentNode?.removeChild(_)}});return vr.set(f,o),f}let vr=new WeakMap;const _r="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_r);var dr=Be('<td class="svelte-1n46o8q"> </td>'),hr=Be('<td class="svelte-1n46o8q"> </td>'),pr=Be('<tr class="svelte-1n46o8q"></tr>'),gr=Be('<div style="display: flex; gap: 1em;"><button class="svelte-1n46o8q">Toggle Mode</button> <button class="svelte-1n46o8q">Copy</button></div> <table class="svelte-1n46o8q"><thead><tr class="svelte-1n46o8q"></tr></thead><tbody class="svelte-1n46o8q"></tbody></table>',1);function mr(e,t){At(t,!0);let n=G(!1),r=ct(()=>E(n)?["Meal Name","Item","Excel Form"]:["Meal Name","Item","Energy (cal)"]);const s=globalThis.excelForm,i=globalThis.regularForm;let a=ct(()=>E(n)?s:i);function u(){navigator.clipboard.writeText(E(a).map(b=>b.map(m=>m.trim()).join("	")).join(\`
\`))}var l=gr(),f=Hn(l),o=we(f);o.__click=()=>Q(n,!E(n));var _=ze(o,2);_.__click=u;var c=ze(f,2),v=we(c),d=we(v);He(d,21,()=>E(r),Ye,(b,m)=>{var w=dr(),D=we(w);_t(()=>mt(D,E(m))),Ie(b,w)});var g=ze(v);He(g,21,()=>E(a),Ye,(b,m)=>{var w=pr();He(w,21,()=>E(m),Ye,(D,B)=>{var J=hr(),M=we(J);_t(()=>mt(M,E(B))),Ie(D,J)}),Ie(b,w)}),Ie(e,l),St()}ur(["click"]);or(mr,{target:document.getElementById("app")});
`;function T(t,i){if(typeof t=="number")return t;switch(t.type){case"variable":return i;case"*":return T(t.left,i)*T(t.right,i);case"/":return T(t.right,i)/T(t.left,i);case"+":return T(t.left,i)+T(t.right,i);case"-":return T(t.left,i)-T(t.right,i);default:if(typeof t=="number")return t;throw Error("unreachable; wonky logic")}}function Le(t,i){function e(u){return"type"in u&&u.type=="variable"?i:u}return{name:t.name,items:t.items.map(u=>({...u,formula:e(u.formula)}))}}function jt(t,i){function e(u){return typeof u=="number"?u.toString():u.type?u.type!="variable"?`${e(u.left)} ${u.type} ${e(u.right)}`:i.toString():u.toString()}return e(t)}function pe(t){let i=(0,D.parse)(t);return{name:i.name,items:i.items.map(u=>({name:u.name.trim(),serving:`${u.serving} ${u.unit}`,energy:T(u.formula,u.serving)}))}}function Ot(t){let i=(0,D.parse)(t);return{name:i.name,items:i.items.map(u=>({name:u.name.trim(),serving:`${u.serving} ${u.unit}`,energy:"="+jt(u.formula,u.serving)}))}}function Oe(t){let i=[];return t.items.length>0&&(i.push([t.name,`${t.items[0].serving} ${t.items[0].name}`,t.items[0].energy]),t.items.slice(1).forEach(e=>{i.push(["",`${e.serving} ${e.name}`,e.energy])})),i}function qe(t){let i=Oe(Ot(t)),e=Oe(pe(t)),u=`
    globalThis.excelForm = ${JSON.stringify(i)};
    globalThis.regularForm = ${JSON.stringify(e)};
    ${je}
  `;return{html:Be,script:u}}var Q={};se(Q,{alert:()=>_r,configureVimMode:()=>Lr,confirm:()=>Pr,copyToClipboard:()=>Dr,deleteLine:()=>Ur,dispatch:()=>br,downloadFile:()=>ar,filterBox:()=>fr,flashNotification:()=>cr,fold:()=>$r,foldAll:()=>Tr,getCurrentEditor:()=>It,getCurrentPage:()=>Lt,getCurrentPageMeta:()=>qt,getCurrentPath:()=>Vt,getCursor:()=>Qt,getRecentlyOpenedPages:()=>Nt,getSelection:()=>zt,getText:()=>Wt,getUiOption:()=>Cr,goHistory:()=>lr,hidePanel:()=>dr,insertAtCursor:()=>xr,insertAtPos:()=>mr,invokeCommand:()=>Jt,isMobile:()=>Vr,moveCursor:()=>vr,moveCursorToLine:()=>yr,moveLineDown:()=>jr,moveLineUp:()=>Br,navigate:()=>Xt,newWindow:()=>sr,openCommandPalette:()=>er,openPageNavigator:()=>Zt,openSearchPanel:()=>Kr,openUrl:()=>ir,prompt:()=>wr,rebuildEditorState:()=>nr,redo:()=>Fr,reloadConfigAndCommands:()=>or,reloadPage:()=>tr,reloadUI:()=>rr,replaceRange:()=>hr,save:()=>Yt,sendMessage:()=>qr,setSelection:()=>Gt,setText:()=>Ht,setUiOption:()=>Ar,showPanel:()=>pr,showProgress:()=>gr,toggleComment:()=>Rr,toggleFold:()=>Er,undo:()=>kr,unfold:()=>Sr,unfoldAll:()=>Mr,uploadFile:()=>ur,vimEx:()=>Or});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function l(t,...i){return globalThis.syscall(t,...i)}function Lt(){return l("editor.getCurrentPage")}function qt(){return l("editor.getCurrentPageMeta")}function Vt(){return l("editor.getCurrentPath")}function Nt(){return l("editor.getRecentlyOpenedPages")}function It(){return l("editor.getCurrentEditor")}function Wt(){return l("editor.getText")}function Ht(t,i=!1){return l("editor.setText",t,i)}function Qt(){return l("editor.getCursor")}function zt(){return l("editor.getSelection")}function Gt(t,i){return l("editor.setSelection",t,i)}function Jt(t,i){return l("editor.invokeCommand",t,i)}function Yt(){return l("editor.save")}function Xt(t,i=!1,e=!1){return l("editor.navigate",t,i,e)}function Zt(t="page"){return l("editor.openPageNavigator",t)}function er(){return l("editor.openCommandPalette")}function tr(){return l("editor.reloadPage")}function rr(){return l("editor.reloadUI")}function nr(){return l("editor.rebuildEditorState")}function or(){return l("editor.reloadConfigAndCommands")}function ir(t,i=!1){return l("editor.openUrl",t,i)}function sr(){return l("editor.newWindow")}function lr(t){return l("editor.goHistory",t)}function ar(t,i){return l("editor.downloadFile",t,i)}function ur(t,i){return l("editor.uploadFile",t,i)}function cr(t,i="info"){return l("editor.flashNotification",t,i)}function fr(t,i,e="",u=""){return l("editor.filterBox",t,i,e,u)}function pr(t,i,e,u=""){return l("editor.showPanel",t,i,e,u)}function dr(t){return l("editor.hidePanel",t)}function gr(t,i){return l("editor.showProgress",t,i)}function mr(t,i){return l("editor.insertAtPos",t,i)}function hr(t,i,e){return l("editor.replaceRange",t,i,e)}function vr(t,i=!1){return l("editor.moveCursor",t,i)}function yr(t,i=1,e=!1){return l("editor.moveCursorToLine",t,i,e)}function xr(t,i=!1,e=!1){return l("editor.insertAtCursor",t,i,e)}function br(t){return l("editor.dispatch",t)}function wr(t,i=""){return l("editor.prompt",t,i)}function Pr(t){return l("editor.confirm",t)}function _r(t){return l("editor.alert",t)}function Cr(t){return l("editor.getUiOption",t)}function Ar(t,i){return l("editor.setUiOption",t,i)}function $r(){return l("editor.fold")}function Sr(){return l("editor.unfold")}function Er(){return l("editor.toggleFold")}function Tr(){return l("editor.foldAll")}function Mr(){return l("editor.unfoldAll")}function kr(){return l("editor.undo")}function Fr(){return l("editor.redo")}function Kr(){return l("editor.openSearchPanel")}function Dr(t){return l("editor.copyToClipboard",t)}function Ur(){return l("editor.deleteLine")}function Rr(){return l("editor.toggleComment")}function Br(){return l("editor.moveLineUp")}function jr(){return l("editor.moveLineDown")}function Or(t){return l("editor.vimEx",t)}function Lr(){return l("editor.configureVimMode")}function qr(t,i){return l("editor.sendMessage",t,i)}function Vr(){return l("editor.isMobile")}var z={};se(z,{expandMarkdown:()=>Wr,markdownToHtml:()=>Hr,parseMarkdown:()=>Nr,renderParseTree:()=>Ir});function Nr(t){return l("markdown.parseMarkdown",t)}function Ir(t){return l("markdown.renderParseTree",t)}function Wr(t){return l("markdown.expandMarkdown",t)}function Hr(t){return l("markdown.markdownToHtml",t)}var G={};se(G,{deleteDocument:()=>on,deleteFile:()=>cn,deletePage:()=>Xr,fileExists:()=>fn,getDocumentMeta:()=>tn,getFileMeta:()=>an,getPageMeta:()=>zr,listDocuments:()=>en,listFiles:()=>sn,listPages:()=>Qr,listPlugs:()=>Zr,pageExists:()=>Gr,readDocument:()=>rn,readFile:()=>ln,readPage:()=>Jr,writeDocument:()=>nn,writeFile:()=>un,writePage:()=>Yr});function Qr(){return l("space.listPages")}function zr(t){return l("space.getPageMeta",t)}function Gr(t){return l("space.pageExists",t)}function Jr(t){return l("space.readPage",t)}function Yr(t,i){return l("space.writePage",t,i)}function Xr(t){return l("space.deletePage",t)}function Zr(){return l("space.listPlugs")}function en(){return l("space.listDocuments")}function tn(t){return l("space.getDocumentMeta",t)}function rn(t){return l("space.readDocument",t)}function nn(t,i){return l("space.writeDocument",t,i)}function on(t){return l("space.deleteDocument",t)}function sn(){return l("space.listFiles")}function ln(t){return l("space.readFile",t)}function an(t){return l("space.getFileMeta",t)}function un(t,i){return l("space.writeFile",t,i)}function cn(t){return l("space.deleteFile",t)}function fn(t){return l("space.fileExists",t)}var uo=new Uint8Array(16);function Ve(t){return t?.children?.map(i=>i.text).join("")}async function Ne(){let t=await G.readPage(await Q.getCurrentPage()),i=await z.parseMarkdown(t),e=[];return i.children?.forEach(u=>{if(u.type=="FencedCode"){let p=Ve(u.children?.filter(w=>w.type=="CodeInfo")?.at(0)),b=Ve(u.children?.filter(w=>w.type=="CodeText")?.at(0));p&&b&&p.trim()=="calorie"&&(e=[...e,b])}}),e}var Ie={showWidget:qe,evaluateCalories:pe,replaceVariable:Le,parseCalorieBlocks:Ne},We={name:"joule",functions:{showWidget:{path:"src/joule.ts:calorieWidget",codeWidget:"calorie"},evaluateCalories:{path:"src/joule.ts:evaluateCalories",syscall:"joule.evaluateCalories"},replaceVariable:{path:"src/joule.ts:replaceVariable",syscall:"joule.replaceVariable"},parseCalorieBlocks:{path:"src/block-parse.ts:calorieBlocks",syscall:"joule.getPageCalorieBlocks"}},assets:{}},Ko={manifest:We,functionMapping:Ie};De(Ie,We,self.postMessage);export{Ko as plug};

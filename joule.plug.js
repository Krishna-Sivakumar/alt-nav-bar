var $t=Object.create;var se=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var St=Object.getOwnPropertyNames;var Et=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty;var Mt=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports),ie=(t,o)=>{for(var e in o)se(t,e,{get:o[e],enumerable:!0})},Ft=(t,o,e,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let p of St(o))!Tt.call(t,p)&&p!==e&&se(t,p,{get:()=>o[p],enumerable:!(l=At(o,p))||l.enumerable});return t};var Kt=(t,o,e)=>(e=t!=null?$t(Et(t)):{},Ft(o||!t||!t.__esModule?se(e,"default",{value:t,enumerable:!0}):e,t));var Be=Mt((_n,De)=>{"use strict";var k=class extends SyntaxError{constructor(o,e,l,p){super(o),this.expected=e,this.found=l,this.location=p,this.name="SyntaxError"}format(o){let e="Error: "+this.message;if(this.location){let l=null,p=o.find(A=>A.source===this.location.source);p&&(l=p.text.split(/\r\n|\n|\r/g));let P=this.location.start,b=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(P):P,S=this.location.source+":"+b.line+":"+b.column;if(l){let A=this.location.end,C="".padEnd(b.line.toString().length," "),E=l[P.line-1],h=(P.line===A.line?A.column:E.length+1)-P.column||1;e+=`
 --> `+S+`
`+C+` |
`+b.line+" | "+E+`
`+C+" | "+"".padEnd(P.column-1," ")+"".padEnd(h,"^")}else e+=`
 at `+S}return e}static buildMessage(o,e){function l(h){return h.codePointAt(0).toString(16).toUpperCase()}let p=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function P(h){return p?h.replace(p,x=>"\\u{"+l(x)+"}"):h}function b(h){return P(h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,x=>"\\x0"+l(x)).replace(/[\x10-\x1F\x7F-\x9F]/g,x=>"\\x"+l(x)))}function S(h){return P(h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,x=>"\\x0"+l(x)).replace(/[\x10-\x1F\x7F-\x9F]/g,x=>"\\x"+l(x)))}let A={literal(h){return'"'+b(h.text)+'"'},class(h){let x=h.parts.map(M=>Array.isArray(M)?S(M[0])+"-"+S(M[1]):S(M));return"["+(h.inverted?"^":"")+x.join("")+"]"+(h.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(h){return h.description}};function C(h){return A[h.type](h)}function E(h){let x=h.map(C);if(x.sort(),x.length>0){let M=1;for(let K=1;K<x.length;K++)x[K-1]!==x[K]&&(x[M]=x[K],M++);x.length=M}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function B(h){return h?'"'+b(h)+'"':"end of input"}return"Expected "+E(o)+" but "+B(e)+" found."}};function Dt(t,o){o=o!==void 0?o:{};let e={},l=o.grammarSource,p={Meal:Ae},P=Ae,b=`
`,S="(",A=")",C="serving",E="slice",B="slices",h="grams",x="gram",M="g",K="cups",pe="cup",ge="tablespoon",de="tbsp",me="teaspoon",ye="tsp",_e="s",Ie=".",xe=/^[A-z0-9 '";,]/,O=/^[+\-]/,q=/^[*\/]/,W=/^[0-9]/,he=/^[ \t\n\r]/,Ne=$(`
`,!1),J=$("(",!1),X=$(")",!1),Pe=$("serving",!1),Qe=$("slice",!1),Ge=$("slices",!1),He=$("grams",!1),ze=$("gram",!1),Je=$("g",!1),Xe=$("cups",!1),Ye=$("cup",!1),Ze=$("tablespoon",!1),et=$("tbsp",!1),tt=$("teaspoon",!1),rt=$("tsp",!1),be=L([["A","z"],["0","9"]," ","'",'"',";",","],!1,!1,!1),_=L(["+","-"],!1,!1,!1),I=L(["*","/"],!1,!1,!1),nt=$("s",!1),N=L([["0","9"]],!1,!1,!1),ot=$(".",!1),ve=L([" ","	",`
`,"\r"],!1,!1,!1);function st(r,i){return{name:r,items:i}}function it(r,i,s,f){return{serving:r,unit:i||"",name:s,formula:f}}function $n(r){return r}function An(r){return r}function at(){return we()}function ct(r,i){let s=r;for(let f in i){let[m,c]=i[f];s={type:m,left:c,right:s}}return s}function lt(r,i){let s=r;for(let f in i){let[m,c]=i[f];s={type:m,left:c,right:s}}return s}function Sn(r){return r}function En(r){return r}function ut(){return{type:"variable"}}function ft(r,i){let s=r;for(let f in i){let[m,c]=i[f];m=="+"?s={}:m=="-"&&(s-=c)}return s}function pt(r,i){let s=r;for(let f in i){let[m,c]=i[f];m=="*"?s*=c:m=="/"&&(s/=c)}return s}function Tn(r){return r}function Mn(r){return r}function gt(){return parseFloat(we())}let n=o.peg$currPos|0,w=n,U=[{line:1,column:1}],T=n,Q=o.peg$maxFailExpected||[],g=o.peg$silentFails|0,R;if(o.startRule){if(!(o.startRule in p))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');P=p[o.startRule]}function we(){return t.substring(w,n)}function Fn(){return w}function Kn(){return{source:l,start:w,end:n}}function Un(){return j(w,n)}function kn(r,i){throw i=i!==void 0?i:j(w,n),$e([yt(r)],t.substring(w,n),i)}function Dn(r,i){throw i=i!==void 0?i:j(w,n),xt(r,i)}function dt(r=n){let i=t.codePointAt(r);return i===void 0?"":String.fromCodePoint(i)}function $(r,i){return{type:"literal",text:r,ignoreCase:i}}function L(r,i,s,f){return{type:"class",parts:r,inverted:i,ignoreCase:s,unicode:f}}function Bn(){return{type:"any"}}function mt(){return{type:"end"}}function yt(r){return{type:"other",description:r}}function Ce(r){let i=U[r],s;if(i)return i;if(r>=U.length)s=U.length-1;else for(s=r;!U[--s];);for(i=U[s],i={line:i.line,column:i.column};s<r;)t.charCodeAt(s)===10?(i.line++,i.column=1):i.column++,s++;return U[r]=i,i}function j(r,i,s){let f=Ce(r),m=Ce(i),c={source:l,start:{offset:r,line:f.line,column:f.column},end:{offset:i,line:m.line,column:m.column}};return s&&l&&typeof l.offset=="function"&&(c.start=l.offset(c.start),c.end=l.offset(c.end)),c}function d(r){n<T||(n>T&&(T=n,Q=[]),Q.push(r))}function xt(r,i){return new k(r,null,null,i)}function $e(r,i,s){return new k(k.buildMessage(r,i),r,i,s)}function Ae(){let r,i,s,f;return r=n,i=Ee(),i!==e?(t.charCodeAt(n)===10?(s=b,n++):(s=e,g===0&&d(Ne)),s!==e?(f=ht(),w=r,r=st(i,f)):(n=r,r=e)):(n=r,r=e),r}function ht(){let r,i;for(r=[],i=Se();i!==e;)r.push(i),i=Se();return r}function Se(){let r,i,s,f,m,c,u,y,oe,Ct;return r=n,i=v(),s=ee(),s!==e?(f=Pt(),f===e&&(f=null),m=bt(),m!==e?(c=v(),t.charCodeAt(n)===40?(u=S,n++):(u=e,g===0&&d(J)),u!==e?(y=vt(),y!==e?(t.charCodeAt(n)===41?(oe=A,n++):(oe=e,g===0&&d(X)),oe!==e?(Ct=v(),w=r,r=it(s,f,m,y)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)):(n=r,r=e),r}function Pt(){let r,i,s,f;return r=n,i=v(),t.substr(n,7)===C?(s=C,n+=7):(s=e,g===0&&d(Pe)),s===e&&(t.substr(n,5)===E?(s=E,n+=5):(s=e,g===0&&d(Qe)),s===e&&(t.substr(n,6)===B?(s=B,n+=6):(s=e,g===0&&d(Ge)),s===e&&(t.substr(n,5)===h?(s=h,n+=5):(s=e,g===0&&d(He)),s===e&&(t.substr(n,4)===x?(s=x,n+=4):(s=e,g===0&&d(ze)),s===e&&(t.charCodeAt(n)===103?(s=M,n++):(s=e,g===0&&d(Je)),s===e&&(t.substr(n,4)===K?(s=K,n+=4):(s=e,g===0&&d(Xe)),s===e&&(t.substr(n,3)===pe?(s=pe,n+=3):(s=e,g===0&&d(Ye)),s===e&&(t.substr(n,10)===ge?(s=ge,n+=10):(s=e,g===0&&d(Ze)),s===e&&(t.substr(n,4)===de?(s=de,n+=4):(s=e,g===0&&d(et)),s===e&&(t.substr(n,8)===me?(s=me,n+=8):(s=e,g===0&&d(tt)),s===e&&(t.substr(n,3)===ye?(s=ye,n+=3):(s=e,g===0&&d(rt))))))))))))),s!==e?(f=v(),w=r,r=s):(n=r,r=e),r}function bt(){let r,i,s,f;return r=n,i=v(),s=Ee(),s!==e?(f=v(),w=r,r=s):(n=r,r=e),r}function Ee(){let r,i,s;if(r=n,i=[],s=t.charAt(n),xe.test(s)?n++:(s=e,g===0&&d(be)),s!==e)for(;s!==e;)i.push(s),s=t.charAt(n),xe.test(s)?n++:(s=e,g===0&&d(be));else i=e;return i!==e&&(w=r,i=at()),r=i,r}function vt(){let r,i,s,f,m,c,u,y;if(r=n,i=v(),s=Y(),s!==e){for(f=v(),m=[],c=n,u=t.charAt(n),O.test(u)?n++:(u=e,g===0&&d(_)),u!==e?(y=Y(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c!==e;)m.push(c),c=n,u=t.charAt(n),O.test(u)?n++:(u=e,g===0&&d(_)),u!==e?(y=Y(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c=v(),w=r,r=ct(s,m)}else n=r,r=e;return r}function Y(){let r,i,s,f,m,c,u,y;if(r=n,i=v(),s=Z(),s!==e){for(f=v(),m=[],c=n,u=t.charAt(n),q.test(u)?n++:(u=e,g===0&&d(I)),u!==e?(y=Z(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c!==e;)m.push(c),c=n,u=t.charAt(n),q.test(u)?n++:(u=e,g===0&&d(I)),u!==e?(y=Z(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c=v(),w=r,r=lt(s,m)}else n=r,r=e;return r}function Z(){let r,i,s,f;return r=n,i=v(),s=Te(),s!==e?(f=v(),w=r,r=s):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===40?(i=S,n++):(i=e,g===0&&d(J)),i!==e?(s=ee(),s!==e?(t.charCodeAt(n)===41?(f=A,n++):(f=e,g===0&&d(X)),f!==e?(w=r,r=s):(n=r,r=e)):(n=r,r=e)):(n=r,r=e),r===e&&(r=wt())),r}function wt(){let r,i,s;return r=n,i=v(),t.substr(n,7)===C?(s=C,n+=7):(s=e,g===0&&d(Pe)),s!==e?(i=[i,s],r=i):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===115?(i=_e,n++):(i=e,g===0&&d(nt)),i!==e?(s=v(),w=r,r=ut()):(n=r,r=e)),r}function ee(){let r,i,s,f,m,c,u,y;if(r=n,i=v(),s=te(),s!==e){for(f=v(),m=[],c=n,u=t.charAt(n),O.test(u)?n++:(u=e,g===0&&d(_)),u!==e?(y=te(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c!==e;)m.push(c),c=n,u=t.charAt(n),O.test(u)?n++:(u=e,g===0&&d(_)),u!==e?(y=te(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c=v(),w=r,r=ft(s,m)}else n=r,r=e;return r}function te(){let r,i,s,f,m,c,u,y;if(r=n,i=v(),s=re(),s!==e){for(f=v(),m=[],c=n,u=t.charAt(n),q.test(u)?n++:(u=e,g===0&&d(I)),u!==e?(y=re(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c!==e;)m.push(c),c=n,u=t.charAt(n),q.test(u)?n++:(u=e,g===0&&d(I)),u!==e?(y=re(),y!==e?(u=[u,y],c=u):(n=c,c=e)):(n=c,c=e);c=v(),w=r,r=pt(s,m)}else n=r,r=e;return r}function re(){let r,i,s,f;return r=n,i=v(),s=Te(),s!==e?(f=v(),w=r,r=s):(n=r,r=e),r===e&&(r=n,t.charCodeAt(n)===40?(i=S,n++):(i=e,g===0&&d(J)),i!==e?(s=ee(),s!==e?(t.charCodeAt(n)===41?(f=A,n++):(f=e,g===0&&d(X)),f!==e?(w=r,r=s):(n=r,r=e)):(n=r,r=e)):(n=r,r=e)),r}function Te(){let r,i,s,f,m,c;if(r=n,i=[],s=t.charAt(n),W.test(s)?n++:(s=e,g===0&&d(N)),s!==e)for(;s!==e;)i.push(s),s=t.charAt(n),W.test(s)?n++:(s=e,g===0&&d(N));else i=e;if(i!==e){if(s=n,t.charCodeAt(n)===46?(f=Ie,n++):(f=e,g===0&&d(ot)),f!==e){if(m=[],c=t.charAt(n),W.test(c)?n++:(c=e,g===0&&d(N)),c!==e)for(;c!==e;)m.push(c),c=t.charAt(n),W.test(c)?n++:(c=e,g===0&&d(N));else m=e;m!==e?(f=[f,m],s=f):(n=s,s=e)}else n=s,s=e;s===e&&(s=null),w=r,r=gt()}else n=r,r=e;return r}function v(){let r,i;for(g++,r=[],i=t.charAt(n),he.test(i)?n++:(i=e,g===0&&d(ve));i!==e;)r.push(i),i=t.charAt(n),he.test(i)?n++:(i=e,g===0&&d(ve));return g--,r}R=P();let ne=R!==e&&n===t.length;function Me(){throw R!==e&&n<t.length&&d(mt()),$e(Q,T<t.length?dt(T):null,T<t.length?j(T,T+1):j(T,T))}if(o.peg$library)return{peg$result:R,peg$currPos:n,peg$FAILED:e,peg$maxFailExpected:Q,peg$maxFailPos:T,peg$success:ne,peg$throw:ne?void 0:Me};if(ne)return R;Me()}De.exports={StartRules:["Meal"],SyntaxError:k,parse:Dt}});function Fe(t){let o=atob(t),e=o.length,l=new Uint8Array(e);for(let p=0;p<e;p++)l[p]=o.charCodeAt(p);return l}function ae(t){typeof t=="string"&&(t=new TextEncoder().encode(t));let o="",e=t.byteLength;for(let l=0;l<e;l++)o+=String.fromCharCode(t[l]);return btoa(o)}var Ln=new Uint8Array(16);var ce=class{constructor(o="",e=1e3){this.prefix=o;this.maxCaptureSize=e;this.prefix=o,this.originalConsole={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),debug:console.debug.bind(console)},this.patchConsole()}originalConsole;logBuffer=[];patchConsole(){let o=e=>(...l)=>{let p=this.prefix?[this.prefix,...l]:l;this.originalConsole[e](...p),this.captureLog(e,l)};console.log=o("log"),console.info=o("info"),console.warn=o("warn"),console.error=o("error"),console.debug=o("debug")}captureLog(o,e){let l={level:o,timestamp:Date.now(),message:e.map(p=>{if(typeof p=="string")return p;try{return JSON.stringify(p)}catch{return String(p)}}).join(" ")};this.logBuffer.push(l),this.logBuffer.length>this.maxCaptureSize&&this.logBuffer.shift()}async postToServer(o,e){if(this.logBuffer.length>0){let p=[...this.logBuffer];this.logBuffer=[];try{if(!(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p.map(b=>({...b,source:e})))})).ok)throw new Error("Failed to post logs to server")}catch(P){console.warn("Could not post logs to server",P.message),this.logBuffer.unshift(...p)}}}},Ke;function Ue(t=""){return Ke=new ce(t),Ke}var V=t=>{throw new Error("Not initialized yet")},fe=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var ue=new Map,le=0;fe&&(globalThis.syscall=async(t,...o)=>await new Promise((e,l)=>{le++,ue.set(le,{resolve:e,reject:l}),V({type:"sys",id:le,name:t,args:o})}));function ke(t,o,e){fe&&(V=e,self.addEventListener("message",l=>{(async()=>{let p=l.data;switch(p.type){case"inv":{let P=t[p.name];if(!P)throw new Error(`Function not loaded: ${p.name}`);try{let b=await Promise.resolve(P(...p.args||[]));V({type:"invr",id:p.id,result:b})}catch(b){console.error("An exception was thrown as a result of invoking function",p.name,"error:",b.message),V({type:"invr",id:p.id,error:b.message})}}break;case"sysr":{let P=p.id,b=ue.get(P);if(!b)throw Error("Invalid request id");ue.delete(P),p.error?b.reject(new Error(p.error)):b.resolve(p.result)}break}})().catch(console.error)}),V({type:"manifest",manifest:o}),Ue(`[${o.name} plug]`))}async function Ut(t,o){if(typeof t!="string"){let e=new Uint8Array(await t.arrayBuffer()),l=e.length>0?ae(e):void 0;o={method:t.method,headers:Object.fromEntries(t.headers.entries()),base64Body:l},t=t.url}return syscall("sandboxFetch.fetch",t,o)}globalThis.nativeFetch=globalThis.fetch;function kt(){globalThis.fetch=async function(t,o){let e=o&&o.body?ae(new Uint8Array(await new Response(o.body).arrayBuffer())):void 0,l=await Ut(t,o&&{method:o.method,headers:o.headers,base64Body:e});return new Response(l.base64Body?Fe(l.base64Body):null,{status:l.status,headers:l.headers})}}fe&&kt();var D=Kt(Be());function F(t,o){if(typeof t=="number")return t;switch(t.type){case"variable":return o;case"*":return F(t.left,o)*F(t.right,o);case"/":return F(t.right,o)/F(t.left,o);case"+":return F(t.left,o)+F(t.right,o);case"-":return F(t.left,o)-F(t.right,o);default:if(typeof t=="number")return t;throw Error("unreachable; wonky logic")}}function Re(t,o){function e(l){return"type"in l&&l.type=="variable"?o:l}return{name:t.name,items:t.items.map(l=>({...l,formula:e(l.formula)}))}}function Bt(t,o){function e(l){return typeof l=="number"?l.toString():l.type?l.type!="variable"?`${e(l.left)} ${l.type} ${e(l.right)}`:o.toString():l.toString()}return e(t)}function Le(t){let o=(0,D.parse)(t);return{name:o.name,items:o.items.map(l=>({name:l.name.trim(),serving:`${l.serving} ${l.unit}`,energy:F(l.formula,l.serving)}))}}function Rt(t){let o=(0,D.parse)(t);return{name:o.name,items:o.items.map(l=>({name:l.name.trim(),serving:`${l.serving} ${l.unit}`,energy:"="+Bt(l.formula,l.serving)}))}}function je(t){let o=Rt(t),e=["Meal Name","Item","Excel Form"],l=[];o.items.length>0&&(l.push([o.name,`${o.items[0].serving} ${o.items[0].name}`,o.items[0].energy]),o.items.slice(1).forEach(C=>{l.push(["",`${C.serving} ${C.name}`,C.energy])}));let p=l.map(C=>C.map(E=>`${E}`).join("	")).join(`
`),P=e.map(C=>`<td>${C}</td>`).join(""),b=l.map(C=>`<tr>${C.map(E=>"<td>"+E.toString()+"</td>").join("")}</tr>`).join(""),S=`
<style>
table {
    color: white;
    width: 100%;
    border-collapse: collapse;
}

tr:nth-child(odd) {
    background: black;
}

tbody > tr:nth-child(even) {
    background: black;
}

tbody > tr:nth-child(odd) {
    background: gray;
}

td {
    padding: 0.6rem;
}
</style>`,A=`
    <table>
      <thead>
        <tr>${P}</tr>
      </thead>
      <tbody>
        ${b}
      </tbody>
    </table>
  `;return console.log(e,l,A),{html:`${A}<button id="glax">copy</button>${S}`,script:`
    document.querySelector("#glax").addEventListener("click", () => {
      navigator.clipboard.writeText(\`${p}\`)
    })
    `}}var G={};ie(G,{alert:()=>br,configureVimMode:()=>Lr,confirm:()=>Pr,copyToClipboard:()=>Kr,deleteLine:()=>Ur,dispatch:()=>xr,downloadFile:()=>sr,filterBox:()=>cr,flashNotification:()=>ar,fold:()=>Cr,foldAll:()=>Sr,getCurrentEditor:()=>qt,getCurrentPage:()=>Lt,getCurrentPageMeta:()=>jt,getCurrentPath:()=>Vt,getCursor:()=>It,getRecentlyOpenedPages:()=>Ot,getSelection:()=>Nt,getText:()=>Wt,getUiOption:()=>vr,goHistory:()=>or,hidePanel:()=>ur,insertAtCursor:()=>yr,insertAtPos:()=>pr,invokeCommand:()=>Gt,isMobile:()=>Vr,moveCursor:()=>dr,moveCursorToLine:()=>mr,moveLineDown:()=>Br,moveLineUp:()=>Dr,navigate:()=>zt,newWindow:()=>nr,openCommandPalette:()=>Xt,openPageNavigator:()=>Jt,openSearchPanel:()=>Fr,openUrl:()=>rr,prompt:()=>hr,rebuildEditorState:()=>er,redo:()=>Mr,reloadConfigAndCommands:()=>tr,reloadPage:()=>Yt,reloadUI:()=>Zt,replaceRange:()=>gr,save:()=>Ht,sendMessage:()=>jr,setSelection:()=>Qt,setText:()=>_t,setUiOption:()=>wr,showPanel:()=>lr,showProgress:()=>fr,toggleComment:()=>kr,toggleFold:()=>Ar,undo:()=>Tr,unfold:()=>$r,unfoldAll:()=>Er,uploadFile:()=>ir,vimEx:()=>Rr});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function a(t,...o){return globalThis.syscall(t,...o)}function Lt(){return a("editor.getCurrentPage")}function jt(){return a("editor.getCurrentPageMeta")}function Vt(){return a("editor.getCurrentPath")}function Ot(){return a("editor.getRecentlyOpenedPages")}function qt(){return a("editor.getCurrentEditor")}function Wt(){return a("editor.getText")}function _t(t,o=!1){return a("editor.setText",t,o)}function It(){return a("editor.getCursor")}function Nt(){return a("editor.getSelection")}function Qt(t,o){return a("editor.setSelection",t,o)}function Gt(t,o){return a("editor.invokeCommand",t,o)}function Ht(){return a("editor.save")}function zt(t,o=!1,e=!1){return a("editor.navigate",t,o,e)}function Jt(t="page"){return a("editor.openPageNavigator",t)}function Xt(){return a("editor.openCommandPalette")}function Yt(){return a("editor.reloadPage")}function Zt(){return a("editor.reloadUI")}function er(){return a("editor.rebuildEditorState")}function tr(){return a("editor.reloadConfigAndCommands")}function rr(t,o=!1){return a("editor.openUrl",t,o)}function nr(){return a("editor.newWindow")}function or(t){return a("editor.goHistory",t)}function sr(t,o){return a("editor.downloadFile",t,o)}function ir(t,o){return a("editor.uploadFile",t,o)}function ar(t,o="info"){return a("editor.flashNotification",t,o)}function cr(t,o,e="",l=""){return a("editor.filterBox",t,o,e,l)}function lr(t,o,e,l=""){return a("editor.showPanel",t,o,e,l)}function ur(t){return a("editor.hidePanel",t)}function fr(t,o){return a("editor.showProgress",t,o)}function pr(t,o){return a("editor.insertAtPos",t,o)}function gr(t,o,e){return a("editor.replaceRange",t,o,e)}function dr(t,o=!1){return a("editor.moveCursor",t,o)}function mr(t,o=1,e=!1){return a("editor.moveCursorToLine",t,o,e)}function yr(t,o=!1,e=!1){return a("editor.insertAtCursor",t,o,e)}function xr(t){return a("editor.dispatch",t)}function hr(t,o=""){return a("editor.prompt",t,o)}function Pr(t){return a("editor.confirm",t)}function br(t){return a("editor.alert",t)}function vr(t){return a("editor.getUiOption",t)}function wr(t,o){return a("editor.setUiOption",t,o)}function Cr(){return a("editor.fold")}function $r(){return a("editor.unfold")}function Ar(){return a("editor.toggleFold")}function Sr(){return a("editor.foldAll")}function Er(){return a("editor.unfoldAll")}function Tr(){return a("editor.undo")}function Mr(){return a("editor.redo")}function Fr(){return a("editor.openSearchPanel")}function Kr(t){return a("editor.copyToClipboard",t)}function Ur(){return a("editor.deleteLine")}function kr(){return a("editor.toggleComment")}function Dr(){return a("editor.moveLineUp")}function Br(){return a("editor.moveLineDown")}function Rr(t){return a("editor.vimEx",t)}function Lr(){return a("editor.configureVimMode")}function jr(t,o){return a("editor.sendMessage",t,o)}function Vr(){return a("editor.isMobile")}var H={};ie(H,{expandMarkdown:()=>Wr,markdownToHtml:()=>_r,parseMarkdown:()=>Or,renderParseTree:()=>qr});function Or(t){return a("markdown.parseMarkdown",t)}function qr(t){return a("markdown.renderParseTree",t)}function Wr(t){return a("markdown.expandMarkdown",t)}function _r(t){return a("markdown.markdownToHtml",t)}var z={};ie(z,{deleteDocument:()=>tn,deleteFile:()=>an,deletePage:()=>zr,fileExists:()=>cn,getDocumentMeta:()=>Yr,getFileMeta:()=>on,getPageMeta:()=>Nr,listDocuments:()=>Xr,listFiles:()=>rn,listPages:()=>Ir,listPlugs:()=>Jr,pageExists:()=>Qr,readDocument:()=>Zr,readFile:()=>nn,readPage:()=>Gr,writeDocument:()=>en,writeFile:()=>sn,writePage:()=>Hr});function Ir(){return a("space.listPages")}function Nr(t){return a("space.getPageMeta",t)}function Qr(t){return a("space.pageExists",t)}function Gr(t){return a("space.readPage",t)}function Hr(t,o){return a("space.writePage",t,o)}function zr(t){return a("space.deletePage",t)}function Jr(){return a("space.listPlugs")}function Xr(){return a("space.listDocuments")}function Yr(t){return a("space.getDocumentMeta",t)}function Zr(t){return a("space.readDocument",t)}function en(t,o){return a("space.writeDocument",t,o)}function tn(t){return a("space.deleteDocument",t)}function rn(){return a("space.listFiles")}function nn(t){return a("space.readFile",t)}function on(t){return a("space.getFileMeta",t)}function sn(t,o){return a("space.writeFile",t,o)}function an(t){return a("space.deleteFile",t)}function cn(t){return a("space.fileExists",t)}var ro=new Uint8Array(16);function Ve(t){return t?.children?.map(o=>o.text).join("")}async function Oe(){let t=await z.readPage(await G.getCurrentPage()),o=await H.parseMarkdown(t),e=[];return o.children?.forEach(l=>{if(l.type=="FencedCode"){let p=Ve(l.children?.filter(b=>b.type=="CodeInfo")?.at(0)),P=Ve(l.children?.filter(b=>b.type=="CodeText")?.at(0));p&&P&&p.trim()=="calorie"&&(e=[...e,P])}}),e}var qe={showWidget:je,evaluateCalories:Le,replaceVariable:Re,parseCalorieBlocks:Oe},We={name:"joule",functions:{showWidget:{path:"src/joule.ts:calorieWidget",codeWidget:"calorie"},evaluateCalories:{path:"src/joule.ts:evaluateCalories",syscall:"joule.evaluateCalories"},replaceVariable:{path:"src/joule.ts:replaceVariable",syscall:"joule.replaceVariable"},parseCalorieBlocks:{path:"src/block-parse.ts:calorieBlocks",syscall:"joule.getPageCalorieBlocks"}},assets:{}},So={manifest:We,functionMapping:qe};ke(qe,We,self.postMessage);export{So as plug};
